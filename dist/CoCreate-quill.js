/*! For license information please see CoCreate-quill.js.LICENSE */
!function(Q,F){"object"==typeof exports&&"object"==typeof module?module.exports=F():"function"==typeof define&&define.amd?define([],F):"object"==typeof exports?exports.quill=F():(Q.CoCreate=Q.CoCreate||{},Q.CoCreate.quill=F())}(this,(function(){return function(Q){function F(F){for(var n,l,U=F[0],s=F[1],c=F[2],d=0,I=[];d<U.length;d++)l=U[d],Object.prototype.hasOwnProperty.call(e,l)&&e[l]&&I.push(e[l][0]),e[l]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(Q[n]=s[n]);for(i&&i(F);I.length;)I.shift()();return t.push.apply(t,c||[]),B()}function B(){for(var Q,F=0;F<t.length;F++){for(var B=t[F],n=!0,U=1;U<B.length;U++){var s=B[U];0!==e[s]&&(n=!1)}n&&(t.splice(F--,1),Q=l(l.s=B[0]))}return Q}var n={},e={"CoCreate-quill":0},t=[];function l(F){if(n[F])return n[F].exports;var B=n[F]={i:F,l:!1,exports:{}};return Q[F].call(B.exports,B,B.exports,l),B.l=!0,B.exports}l.m=Q,l.c=n,l.d=function(Q,F,B){l.o(Q,F)||Object.defineProperty(Q,F,{enumerable:!0,get:B})},l.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},l.t=function(Q,F){if(1&F&&(Q=l(Q)),8&F)return Q;if(4&F&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var B=Object.create(null);if(l.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:Q}),2&F&&"string"!=typeof Q)for(var n in Q)l.d(B,n,function(F){return Q[F]}.bind(null,n));return B},l.n=function(Q){var F=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return l.d(F,"a",F),F},l.o=function(Q,F){return Object.prototype.hasOwnProperty.call(Q,F)},l.p="";var U=this.webpackJsonp=this.webpackJsonp||[],s=U.push.bind(U);U.push=F,U=U.slice();for(var c=0;c<U.length;c++)F(U[c]);var i=s;return t.push(["./src/index.js","vendors~CoCreate-quill"]),B()}({"./src/index.js":function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar Y = _interopRequireWildcard(__webpack_require__(/*! yjs */ \"./node_modules/yjs/dist/yjs.mjs\"));\n\nvar _yQuill_binding = __webpack_require__(/*! ./js/y-quill_binding */ \"./src/js/y-quill_binding.js\");\n\nvar _quill = _interopRequireDefault(__webpack_require__(/*! quill */ \"./node_modules/quill/dist/quill.js\"));\n\nvar _quillCursors = _interopRequireDefault(__webpack_require__(/*! quill-cursors */ \"./node_modules/quill-cursors/dist/quill-cursors.js\"));\n\nvar _userCursor_class = __webpack_require__(/*! @cocreate/crdt/src/utils/cursor/userCursor_class */ \"./node_modules/@cocreate/crdt/src/utils/cursor/userCursor_class.js\");\n\nvar _crudClient = _interopRequireDefault(__webpack_require__(/*! @cocreate/crud-client */ \"./node_modules/@cocreate/crud-client/src/index.js\"));\n\nvar _crdt = _interopRequireDefault(__webpack_require__(/*! @cocreate/crdt */ \"./node_modules/@cocreate/crdt/src/index.js\"));\n\nvar _form = _interopRequireDefault(__webpack_require__(/*! @cocreate/form */ \"./node_modules/@cocreate/form/src/index.js\"));\n\nvar _observer = _interopRequireDefault(__webpack_require__(/*! @cocreate/observer */ \"./node_modules/@cocreate/observer/src/index.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n/* eslint-env browser */\n// @ts-ignore\n_quill.default.register('modules/cursors', _quillCursors.default); //window.addEventListener('load', () => {\n\n/**\n * Create all  Quills with class .quill\n * @private\n *\n * @development jeanmendozar@gmail.com\n * @param {None}\n */\n\n\nclass CoCreateYjsQuill {\n  constructor(selector) {\n    this.elements = [];\n    this.selector = selector;\n    this.editors = [];\n    this.bindings = [];\n    this.organization_Id = config.organization_Id || 'randomOrganizationID';\n    this.themeQuill = 'snow';\n    this.onNewEditor = null; //this.themeQuill = typeof window.config.themeQuill != 'undefined' ? window.config.themeQuill : 'snow';\n  }\n\n  _createEditor(editorContainer) {\n    let themeQuill = editorContainer.dataset['theme'] ? editorContainer.dataset['theme'] : this.themeQuill;\n    console.log(\"ThemeQuill => \" + themeQuill);\n    var editor = new _quill.default(editorContainer, {\n      modules: {\n        cursors: true,\n        toolbar: [[{\n          header: [1, 2, false]\n        }], ['bold', 'italic', 'underline'], ['image', 'code-block']],\n        history: {\n          userOnly: true\n        }\n      },\n      placeholder: 'Start collaborating...',\n      theme: themeQuill // 'snow' or  'bubble'\n\n    });\n    this.editors.push(editor);\n    if (this.onNewEditor) this.onNewEditor(editor);\n    return editor;\n  }\n\n  _createBinding(type_element, editor, provider) {\n    let binding = new _yQuill_binding.QuillBinding(type_element, editor, provider.awareness);\n    this.bindings.push(binding);\n    return binding;\n  }\n\n  initYSocket(element, editor) {\n    const {\n      collection,\n      document_id,\n      name\n    } = _crudClient.default.getAttr(element);\n\n    if (collection && name && document_id) {\n      const id = _crdt.default.generateID(config.organization_Id, collection, document_id, name);\n\n      _crdt.default.createDoc(id, element);\n\n      let provider = _crdt.default.getProvider(id);\n\n      let doc_type = _crdt.default.getType(id);\n\n      let binding = this._createBinding(doc_type, editor, provider);\n\n      setTimeout(function () {\n        if (element.crudSetted) {\n          return;\n        } // CoCreate.getDocument({\n        // \tcollection: collection,\n        // \tdocument_id: document_id,\n        // \tmetadata: {\n        // \t\ttype: 'crdt'\n        // \t}\n        // })\n\n      }, 1000);\n      new _userCursor_class.UserCursor(provider);\n    }\n  }\n\n  init(container) {\n    this._init(container);\n\n    this.initSocketEvent();\n  }\n\n  _init(container) {\n    var _this = this;\n\n    const mainContainer = container || document;\n    let elements = mainContainer.querySelectorAll('.quill');\n\n    if (elements.length == 0 && mainContainer.classList && mainContainer.classList.contains('quill')) {\n      elements = [mainContainer];\n    }\n\n    elements.forEach(function (element, index) {\n      if (_observer.default) {\n        if (_observer.default.getInitialized(element, \"cocreate-quill\")) {\n          return;\n        }\n      }\n\n      try {\n        /**\n         * Creando la instancia Codemirror\n        */\n        let editor = _this._createEditor(element);\n\n        _this.initYSocket(element, editor);\n\n        _this.initEvent(element, editor);\n\n        if (_observer.default) {\n          _observer.default.setInitialized(element, \"cocreate-quill\");\n        }\n\n        _this.elements.push(element);\n      } catch (error) {\n        console.error(error); //return false \n      }\n    }); //end forEach\n  }\n\n  initSocketEvent() {\n    const self = this; // CoCreateSocket.listen('getDocument', function(data) {\n    // \tif (!data.metadata || data.metadata.type != \"crdt\") {\n    // \t\treturn;\n    // \t}\n    // \tself.elements.forEach((quill) => {\n    // \t\tconst collection = quill.getAttribute('data-collection')\n    // \t\tconst id = quill.getAttribute('data-document_id')\n    // \t\tconst name = quill.getAttribute('name')\n    // \t\tif (quill.crudSetted === true) {\n    // \t\t\treturn;\n    // \t\t}\n    // \t\tif (data['collection'] == collection && data['document_id'] == id && (name in data.data)) {\n    // \t\t\tcrdt.replaceText({\n    // \t\t\t\tcollection: collection,\n    // \t\t\t\tdocument_id: id,\n    // \t\t\t\tname: name,\n    // \t\t\t\tvalue: data['data'][name],\n    // \t\t\t})\n    // \t\t\tquill.crudSetted = true;\n    // \t\t}\n    // \t});\n    // \t// self.editors.forEach((editor) => {\n    // \t// \tconst el = editor.options.container\n    // \t// \tconst collection = el.getAttribute('data-collection')\n    // \t// \tconst id = el.getAttribute('data-document_id')\n    // \t// \tconst name = el.getAttribute('name')\n    // \t// \tif (el.crudSetted === true) {\n    // \t// \t\treturn;\n    // \t// \t}\n    // \t// \tif (data['collection'] == collection && data['document_id'] == id && (name in data.data)) {\n    // \t// \t\t// crdt.replaceText({\n    // \t// \t\t// \tcollection: collection,\n    // \t// \t\t// \tdocument_id: id,\n    // \t// \t\t// \tname: name,\n    // \t// \t\t// \tvalue: data['data'][name],\n    // \t// \t\t// })\n    // \t// \t\teditor.setText(data['data'][name]);\n    // \t// \t\tel.crudSetted = true;\n    // \t// \t}\n    // \t// });\n    // });\n  }\n\n  initEvent(element, editor) {\n    let _this = this;\n\n    editor.on('editor-change', function () {\n      var value = editor.getText();\n      var id = element.getAttribute('id');\n\n      _this.requestDocumentID(element);\n\n      if (!id) return;\n      var targets = document.querySelectorAll('[data-get_value=\"' + id + '\"]');\n      targets.forEach(target => {\n        if (target.nodeName == 'IFRAME') {\n          let document_iframe = target.contentDocument;\n          target.srcdoc = value;\n        } else {\n          if (typeof target.innerHTML != \"undefined\") {\n            target.innerHTML = value;\n          } else if (typeof target.value != \"undefined\") {\n            target.value = value;\n          } else if (typeof target.textContent != \"undefined\") {\n            target.textContent = value;\n          }\n        }\n      });\n    });\n    element.addEventListener('set-document_id', function (event) {\n      const old_data = editor.getText();\n\n      _this.initYSocket(element, editor, old_data);\n\n      _this.saveDataIntoDB(element, old_data);\n    });\n    element.addEventListener('clicked-submitBtn', function () {\n      const old_data = editor.getText();\n\n      _this.saveDataIntoDB(element, old_data);\n\n      editor.setText(old_data);\n    });\n  }\n\n  generateTypeName(element) {\n    try {\n      let {\n        collection,\n        name,\n        document_id\n      } = _crudClient.default.getAttr(element);\n\n      collection = collection || '_';\n      name = name || '_';\n      document_id = document_id || '_';\n      const info = {\n        org: config.organization_Id,\n        collection,\n        document_id,\n        name\n      };\n      return btoa(JSON.stringify(info));\n    } catch (error) {\n      return false;\n    }\n  }\n\n  requestDocumentID(element) {\n    const document_id = element.getAttribute('data-document_id');\n\n    const realtime = _crudClient.default.isRealtimeAttr(element);\n\n    if (!document_id && realtime) {\n      _form.default.request({\n        element\n      });\n\n      element.setAttribute('data-document_id', 'pending');\n    }\n  }\n\n  saveDataIntoDB(element, value) {\n    const {\n      collection,\n      document_id,\n      name\n    } = _crudClient.default.getAttr(element);\n\n    if (!_crudClient.default.isSaveAttr(element) || document_id == 'null') {\n      return;\n    }\n\n    _crdt.default.replaceText({\n      collection,\n      document_id,\n      data: {\n        [name]: value\n      }\n    });\n  }\n\n  parseTypeName(name) {\n    const data = JSON.parse(atob(name));\n    return data;\n  }\n\n} //end Class CoCreateYjsQuill\n\n\nconst obj_cocreatequill = new CoCreateYjsQuill('.quill');\n/**\n * Initialization all OBJS with class .quill\n*/\n\nobj_cocreatequill.init(); // @ts-ignore\n\nwindow.CoCreateQuill = obj_cocreatequill;\n\nif (_observer.default) {\n  _observer.default.init({\n    name: 'CoCreateQuill',\n    observe: ['subtree', 'childList'],\n    include: '.quill',\n    callback: function (mutation) {\n      CoCreateQuill._init(mutation.target);\n    }\n  });\n}\n\nif (_form.default) {\n  _form.default.init({\n    name: 'CoCreateQuill',\n    selector: '.quill',\n    callback: function (el) {}\n  });\n} //});//end window LOAD\n\n\nvar _default = CoCreateYjsQuill;\nexports.default = _default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5xdWlsbC8uL3NyYy9pbmRleC5qcz9iNjM1Il0sIm5hbWVzIjpbIlF1aWxsIiwicmVnaXN0ZXIiLCJRdWlsbEN1cnNvcnMiLCJDb0NyZWF0ZVlqc1F1aWxsIiwiY29uc3RydWN0b3IiLCJzZWxlY3RvciIsImVsZW1lbnRzIiwiZWRpdG9ycyIsImJpbmRpbmdzIiwib3JnYW5pemF0aW9uX0lkIiwiY29uZmlnIiwidGhlbWVRdWlsbCIsIm9uTmV3RWRpdG9yIiwiX2NyZWF0ZUVkaXRvciIsImVkaXRvckNvbnRhaW5lciIsImRhdGFzZXQiLCJjb25zb2xlIiwibG9nIiwiZWRpdG9yIiwibW9kdWxlcyIsImN1cnNvcnMiLCJ0b29sYmFyIiwiaGVhZGVyIiwiaGlzdG9yeSIsInVzZXJPbmx5IiwicGxhY2Vob2xkZXIiLCJ0aGVtZSIsInB1c2giLCJfY3JlYXRlQmluZGluZyIsInR5cGVfZWxlbWVudCIsInByb3ZpZGVyIiwiYmluZGluZyIsIlF1aWxsQmluZGluZyIsImF3YXJlbmVzcyIsImluaXRZU29ja2V0IiwiZWxlbWVudCIsImNvbGxlY3Rpb24iLCJkb2N1bWVudF9pZCIsIm5hbWUiLCJjcnVkIiwiZ2V0QXR0ciIsImlkIiwiY3JkdCIsImdlbmVyYXRlSUQiLCJjcmVhdGVEb2MiLCJnZXRQcm92aWRlciIsImRvY190eXBlIiwiZ2V0VHlwZSIsInNldFRpbWVvdXQiLCJjcnVkU2V0dGVkIiwiVXNlckN1cnNvciIsImluaXQiLCJjb250YWluZXIiLCJfaW5pdCIsImluaXRTb2NrZXRFdmVudCIsIl90aGlzIiwibWFpbkNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiZm9yRWFjaCIsImluZGV4IiwiQ29DcmVhdGVPYnNlcnZlciIsImdldEluaXRpYWxpemVkIiwiaW5pdEV2ZW50Iiwic2V0SW5pdGlhbGl6ZWQiLCJlcnJvciIsInNlbGYiLCJvbiIsInZhbHVlIiwiZ2V0VGV4dCIsImdldEF0dHJpYnV0ZSIsInJlcXVlc3REb2N1bWVudElEIiwidGFyZ2V0cyIsInRhcmdldCIsIm5vZGVOYW1lIiwiZG9jdW1lbnRfaWZyYW1lIiwiY29udGVudERvY3VtZW50Iiwic3JjZG9jIiwiaW5uZXJIVE1MIiwidGV4dENvbnRlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJvbGRfZGF0YSIsInNhdmVEYXRhSW50b0RCIiwic2V0VGV4dCIsImdlbmVyYXRlVHlwZU5hbWUiLCJpbmZvIiwib3JnIiwiYnRvYSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZWFsdGltZSIsImlzUmVhbHRpbWVBdHRyIiwiQ29DcmVhdGVGb3JtIiwicmVxdWVzdCIsInNldEF0dHJpYnV0ZSIsImlzU2F2ZUF0dHIiLCJyZXBsYWNlVGV4dCIsImRhdGEiLCJwYXJzZVR5cGVOYW1lIiwicGFyc2UiLCJhdG9iIiwib2JqX2NvY3JlYXRlcXVpbGwiLCJ3aW5kb3ciLCJDb0NyZWF0ZVF1aWxsIiwib2JzZXJ2ZSIsImluY2x1ZGUiLCJjYWxsYmFjayIsIm11dGF0aW9uIiwiZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFJQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFYQTtBQUNBO0FBWUFBLGVBQU1DLFFBQU4sQ0FBZSxpQkFBZixFQUFrQ0MscUJBQWxDLEUsQ0FHQTs7QUFDQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0MsTUFBTUMsZ0JBQU4sQ0FBdUI7QUFFdEJDLGFBQVcsQ0FBQ0MsUUFBRCxFQUFXO0FBQ3JCLFNBQUtDLFFBQUwsR0FBZ0IsRUFBaEI7QUFDQSxTQUFLRCxRQUFMLEdBQWdCQSxRQUFoQjtBQUNBLFNBQUtFLE9BQUwsR0FBZSxFQUFmO0FBQ0EsU0FBS0MsUUFBTCxHQUFnQixFQUFoQjtBQUNBLFNBQUtDLGVBQUwsR0FBdUJDLE1BQU0sQ0FBQ0QsZUFBUCxJQUEwQixzQkFBakQ7QUFD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SUFBSXRHLGdCQUFKLENBQXFCLFFBQXJCLENBQTFCO0FBQ0E7QUFDRDtBQUNBOztBQUNDc0csaUJBQWlCLENBQUN0RCxJQUFsQixHLENBRUE7O0FBQ0F1RCxNQUFNLENBQUNDLGFBQVAsR0FBdUJGLGlCQUF2Qjs7QUFFQSxJQUFJekMsaUJBQUosRUFBc0I7QUFDckJBLG9CQUFpQmIsSUFBakIsQ0FBc0I7QUFDckJiLFFBQUksRUFBRSxlQURlO0FBRXJCc0UsV0FBTyxFQUFFLENBQUMsU0FBRCxFQUFZLFdBQVosQ0FGWTtBQUdyQkMsV0FBTyxFQUFFLFFBSFk7QUFJckJDLFlBQVEsRUFBRSxVQUFTQyxRQUFULEVBQW1CO0FBQzVCSixtQkFBYSxDQUFDdEQsS0FBZCxDQUFvQjBELFFBQVEsQ0FBQ25DLE1BQTdCO0FBQ0E7QUFOb0IsR0FBdEI7QUFTQTs7QUFFRCxJQUFJb0IsYUFBSixFQUFrQjtBQUNqQkEsZ0JBQWE3QyxJQUFiLENBQWtCO0FBQ2pCYixRQUFJLEVBQUUsZUFEVztBQUVqQmpDLFlBQVEsRUFBRSxRQUZPO0FBR2pCeUcsWUFBUSxFQUFFLFVBQVNFLEVBQVQsRUFBYSxDQUV0QjtBQUxnQixHQUFsQjtBQU9BLEMsQ0FFRjs7O2VBQ2U3RyxnQiIsImZpbGUiOiIuL3NyYy9pbmRleC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuLyogZXNsaW50LWVudiBicm93c2VyICovXG4vLyBAdHMtaWdub3JlXG5cbmltcG9ydCAqIGFzIFkgZnJvbSAneWpzJ1xuaW1wb3J0IHsgUXVpbGxCaW5kaW5nIH0gZnJvbSAnLi9qcy95LXF1aWxsX2JpbmRpbmcnXG5pbXBvcnQgUXVpbGwgZnJvbSAncXVpbGwnXG5pbXBvcnQgUXVpbGxDdXJzb3JzIGZyb20gJ3F1aWxsLWN1cnNvcnMnXG5pbXBvcnQgeyBVc2VyQ3Vyc29yIH0gZnJvbSAnQGNvY3JlYXRlL2NyZHQvc3JjL3V0aWxzL2N1cnNvci91c2VyQ3Vyc29yX2NsYXNzJ1xuaW1wb3J0IGNydWQgZnJvbSAnQGNvY3JlYXRlL2NydWQtY2xpZW50J1xuaW1wb3J0IGNyZHQgZnJvbSAnQGNvY3JlYXRlL2NyZHQnXG5pbXBvcnQgQ29DcmVhdGVGb3JtIGZyb20gJ0Bjb2NyZWF0ZS9mb3JtJ1xuaW1wb3J0IENvQ3JlYXRlT2JzZXJ2ZXIgZnJvbSAnQGNvY3JlYXRlL29ic2VydmVyJ1xuXG5RdWlsbC5yZWdpc3RlcignbW9kdWxlcy9jdXJzb3JzJywgUXVpbGxDdXJzb3JzKVxuXG5cbi8vd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG5cdC8qKlxuXHQgKiBDcmVhdGUgYWxsICBRdWlsbHMgd2l0aCBjbGFzcyAucXVpbGxcblx0ICogQHByaXZhdGVcblx0ICpcblx0ICogQGRldmVsb3BtZW50IGplYW5tZW5kb3phckBnbWFpbC5jb21cblx0ICogQHBhcmFtIHtOb25lfVxuXHQgKi9cbiBcblxuXHRjbGFzcyBDb0NyZWF0ZVlqc1F1aWxsIHtcblx0XHRcblx0XHRjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xuXHRcdFx0dGhpcy5lbGVtZW50cyA9IFtdO1xuXHRcdFx0dGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHRcdFx0dGhpcy5lZGl0b3JzID0gW107XG5cdFx0XHR0aGlzLmJpbmRpbmdzID0gW107XG5cdFx0XHR0aGlzLm9yZ2FuaXphdGlvbl9JZCA9IGNvbmZpZy5vcmdhbml6YXRpb25fSWQgfHwgJ3JhbmRvbU9yZ2FuaXphdGlvbklEJztcblx0XHRcdHRoaXMudGhlbWVRdWlsbCA9ICdzbm93J1xuXHRcdFx0dGhpcy5vbk5ld0VkaXRvciA9IG51bGw7XG5cdFx0XHQvL3RoaXMudGhlbWVRdWlsbCA9IHR5cGVvZiB3aW5kb3cuY29uZmlnLnRoZW1lUXVpbGwgIT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cuY29uZmlnLnRoZW1lUXVpbGwgOiAnc25vdyc7XG5cdFx0fVxuXHRcdFxuXHRcdF9jcmVhdGVFZGl0b3IoZWRpdG9yQ29udGFpbmVyKXtcblx0XHRcdGxldCB0aGVtZVF1aWxsID0gZWRpdG9yQ29udGFpbmVyLmRhdGFzZXRbJ3RoZW1lJ10gPyBlZGl0b3JDb250YWluZXIuZGF0YXNldFsndGhlbWUnXSA6IHRoaXMudGhlbWVRdWlsbFxuXHRcdFx0Y29uc29sZS5sb2coXCJUaGVtZVF1aWxsID0+IFwiK3RoZW1lUXVpbGwpXG5cdFx0XHR2YXIgZWRpdG9yID0gbmV3IFF1aWxsKGVkaXRvckNvbnRhaW5lciwge1xuXHRcdFx0XHRcdG1vZHVsZXM6IHtcblx0XHRcdFx0XHRcdGN1cnNvcnM6IHRydWUsXG5cdFx0XHRcdFx0XHR0b29sYmFyOiBbXG5cdFx0XHRcdFx0XHRcdFt7IGhlYWRlcjogWzEsIDIsIGZhbHNlXSB9XSxcblx0XHRcdFx0XHRcdFx0Wydib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnXSxcblx0XHRcdFx0XHRcdFx0WydpbWFnZScsICdjb2RlLWJsb2NrJ11cblx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRoaXN0b3J5OiB7XG5cdFx0XHRcdFx0XHRcdHVzZXJPbmx5OiB0cnVlXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1N0YXJ0IGNvbGxhYm9yYXRpbmcuLi4nLFxuXHRcdFx0XHRcdHRoZW1lOiB0aGVtZVF1aWxsIC8vICdzbm93JyBvciAgJ2J1YmJsZSdcblx0XHRcdFx0fSk7XG5cdFx0XHR0aGlzLmVkaXRvcnMucHVzaChlZGl0b3IpO1xuXHRcdFx0aWYodGhpcy5vbk5ld0VkaXRvcilcblx0XHRcdFx0dGhpcy5vbk5ld0VkaXRvcihlZGl0b3IpO1xuXHRcdFx0cmV0dXJuIGVkaXRvcjtcblx0XHR9XG5cdFx0XG5cdFx0X2NyZWF0ZUJpbmRpbmcodHlwZV9lbGVtZW50LCBlZGl0b3IsIHByb3ZpZGVyKXtcblx0XHRcdFx0bGV0IGJpbmRpbmcgPSBuZXcgUXVpbGxCaW5kaW5nKHR5cGVfZWxlbWVudCwgZWRpdG9yLCBwcm92aWRlci5hd2FyZW5lc3MpXG5cdFx0XHRcdHRoaXMuYmluZGluZ3MucHVzaChiaW5kaW5nKTtcblx0XHRcdHJldHVybiBiaW5kaW5nO1xuXHRcdH1cblx0XHRcblx0XHRpbml0WVNvY2tldChlbGVtZW50LCBlZGl0b3IpIHtcblx0XHRcdGNvbnN0IHsgY29sbGVjdGlvbiwgZG9jdW1lbnRfaWQsIG5hbWUgfSA9IGNydWQuZ2V0QXR0cihlbGVtZW50KVxuXG5cdFx0XHRpZiAoY29sbGVjdGlvbiAmJiBuYW1lICYmIGRvY3VtZW50X2lkKSB7XG5cdFx0XHRcdGNvbnN0IGlkID0gY3JkdC5nZW5lcmF0ZUlEKGNvbmZpZy5vcmdhbml6YXRpb25fSWQsIGNvbGxlY3Rpb24sIGRvY3VtZW50X2lkLCBuYW1lKTtcblx0XHRcdFx0Y3JkdC5jcmVhdGVEb2MoaWQsIGVsZW1lbnQpO1xuXHRcdFx0XHRcblx0XHRcdFx0bGV0IHByb3ZpZGVyID0gY3JkdC5nZXRQcm92aWRlcihpZClcblx0XHRcdFx0bGV0IGRvY190eXBlID0gY3JkdC5nZXRUeXBlKGlkKVxuXHRcdFx0XHRcblx0XHRcdFx0bGV0IGJpbmRpbmcgPSB0aGlzLl9jcmVhdGVCaW5kaW5nKGRvY190eXBlLCBlZGl0b3IsIHByb3ZpZGVyKVxuXHRcdFx0XHRcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoZWxlbWVudC5jcnVkU2V0dGVkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIENvQ3JlYXRlLmdldERvY3VtZW50KHtcblx0XHRcdFx0XHQvLyBcdGNvbGxlY3Rpb246IGNvbGxlY3Rpb24sXG5cdFx0XHRcdFx0Ly8gXHRkb2N1bWVudF9pZDogZG9jdW1lbnRfaWQsXG5cdFx0XHRcdFx0Ly8gXHRtZXRhZGF0YToge1xuXHRcdFx0XHRcdC8vIFx0XHR0eXBlOiAnY3JkdCdcblx0XHRcdFx0XHQvLyBcdH1cblx0XHRcdFx0XHQvLyB9KVxuXHRcdFx0XHR9LCAxMDAwKTtcblx0XHRcdFx0bmV3IFVzZXJDdXJzb3IocHJvdmlkZXIpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHRpbml0KGNvbnRhaW5lcikge1xuXHRcdFx0dGhpcy5faW5pdChjb250YWluZXIpXG5cdFx0XHR0aGlzLmluaXRTb2NrZXRFdmVudCgpXG5cdFx0fVxuXHRcdFxuXHRcdF9pbml0KGNvbnRhaW5lcil7XG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXHRcdFx0Y29uc3QgbWFpbkNvbnRhaW5lciA9IGNvbnRhaW5lciB8fCBkb2N1bWVudDtcblx0XHRcdFxuXHRcdFx0bGV0IGVsZW1lbnRzID0gbWFpbkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcucXVpbGwnKVxuXHRcdFx0XG5cdFx0XHRpZiAoZWxlbWVudHMubGVuZ3RoID09IDAgJiYgbWFpbkNvbnRhaW5lci5jbGFzc0xpc3QgJiYgbWFpbkNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ3F1aWxsJykpIHtcblx0XHRcdFx0ZWxlbWVudHMgPSBbbWFpbkNvbnRhaW5lcl07XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdFxuXHRcdFx0ZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50LGluZGV4KXtcblx0XHRcdFx0aWYgKENvQ3JlYXRlT2JzZXJ2ZXIpIHtcblx0XHRcdFx0XHRpZiAoQ29DcmVhdGVPYnNlcnZlci5nZXRJbml0aWFsaXplZChlbGVtZW50LCBcImNvY3JlYXRlLXF1aWxsXCIpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHRyeXsgIFxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdCAqIENyZWFuZG8gbGEgaW5zdGFuY2lhIENvZGVtaXJyb3Jcblx0XHRcdFx0XHQqL1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGxldCBlZGl0b3IgPSBfdGhpcy5fY3JlYXRlRWRpdG9yKGVsZW1lbnQpO1xuXHRcdFx0XHRcdF90aGlzLmluaXRZU29ja2V0KGVsZW1lbnQsIGVkaXRvcilcblx0XHRcdFx0XHRfdGhpcy5pbml0RXZlbnQoZWxlbWVudCwgZWRpdG9yKVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChDb0NyZWF0ZU9ic2VydmVyKSB7XG5cdFx0XHRcdFx0XHRDb0NyZWF0ZU9ic2VydmVyLnNldEluaXRpYWxpemVkKGVsZW1lbnQsIFwiY29jcmVhdGUtcXVpbGxcIilcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0X3RoaXMuZWxlbWVudHMucHVzaChlbGVtZW50KVxuXHRcdFx0XHRcdFxuXHRcdFx0XHR9Y2F0Y2goZXJyb3IpIHtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTsgICAgXG5cdFx0XHRcdFx0Ly9yZXR1cm4gZmFsc2UgXG5cdFx0XHRcdFx0XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHR9KTsvL2VuZCBmb3JFYWNoXG5cdFx0fVxuXHRcdFxuXHRcdGluaXRTb2NrZXRFdmVudCgpIHtcblx0XHRcdGNvbnN0IHNlbGYgPSB0aGlzO1xuXHRcdFx0Ly8gQ29DcmVhdGVTb2NrZXQubGlzdGVuKCdnZXREb2N1bWVudCcsIGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdC8vIFx0aWYgKCFkYXRhLm1ldGFkYXRhIHx8IGRhdGEubWV0YWRhdGEudHlwZSAhPSBcImNyZHRcIikge1xuXHRcdFx0Ly8gXHRcdHJldHVybjtcblx0XHRcdC8vIFx0fVxuXHRcdFx0XHRcblx0XHRcdC8vIFx0c2VsZi5lbGVtZW50cy5mb3JFYWNoKChxdWlsbCkgPT4ge1xuXHRcdFx0Ly8gXHRcdGNvbnN0IGNvbGxlY3Rpb24gPSBxdWlsbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29sbGVjdGlvbicpXG5cdFx0XHQvLyBcdFx0Y29uc3QgaWQgPSBxdWlsbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZG9jdW1lbnRfaWQnKVxuXHRcdFx0Ly8gXHRcdGNvbnN0IG5hbWUgPSBxdWlsbC5nZXRBdHRyaWJ1dGUoJ25hbWUnKVxuXHRcdFx0XHRcdFxuXHRcdFx0Ly8gXHRcdGlmIChxdWlsbC5jcnVkU2V0dGVkID09PSB0cnVlKSB7XG5cdFx0XHQvLyBcdFx0XHRyZXR1cm47XG5cdFx0XHQvLyBcdFx0fVxuXHRcdFx0Ly8gXHRcdGlmIChkYXRhWydjb2xsZWN0aW9uJ10gPT0gY29sbGVjdGlvbiAmJiBkYXRhWydkb2N1bWVudF9pZCddID09IGlkICYmIChuYW1lIGluIGRhdGEuZGF0YSkpIHtcblx0XHRcdC8vIFx0XHRcdGNyZHQucmVwbGFjZVRleHQoe1xuXHRcdFx0Ly8gXHRcdFx0XHRjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLFxuXHRcdFx0Ly8gXHRcdFx0XHRkb2N1bWVudF9pZDogaWQsXG5cdFx0XHQvLyBcdFx0XHRcdG5hbWU6IG5hbWUsXG5cdFx0XHQvLyBcdFx0XHRcdHZhbHVlOiBkYXRhWydkYXRhJ11bbmFtZV0sXG5cdFx0XHQvLyBcdFx0XHR9KVxuXHRcdFx0Ly8gXHRcdFx0cXVpbGwuY3J1ZFNldHRlZCA9IHRydWU7XG5cblx0XHRcdC8vIFx0XHR9XG5cdFx0XHQvLyBcdH0pO1xuXHRcdFx0Ly8gXHQvLyBzZWxmLmVkaXRvcnMuZm9yRWFjaCgoZWRpdG9yKSA9PiB7XG5cdFx0XHQvLyBcdC8vIFx0Y29uc3QgZWwgPSBlZGl0b3Iub3B0aW9ucy5jb250YWluZXJcblx0XHRcdC8vIFx0Ly8gXHRjb25zdCBjb2xsZWN0aW9uID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbGxlY3Rpb24nKVxuXHRcdFx0Ly8gXHQvLyBcdGNvbnN0IGlkID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJylcblx0XHRcdC8vIFx0Ly8gXHRjb25zdCBuYW1lID0gZWwuZ2V0QXR0cmlidXRlKCduYW1lJylcblx0XHRcdFx0XHRcblx0XHRcdC8vIFx0Ly8gXHRpZiAoZWwuY3J1ZFNldHRlZCA9PT0gdHJ1ZSkge1xuXHRcdFx0Ly8gXHQvLyBcdFx0cmV0dXJuO1xuXHRcdFx0Ly8gXHQvLyBcdH1cblx0XHRcdC8vIFx0Ly8gXHRpZiAoZGF0YVsnY29sbGVjdGlvbiddID09IGNvbGxlY3Rpb24gJiYgZGF0YVsnZG9jdW1lbnRfaWQnXSA9PSBpZCAmJiAobmFtZSBpbiBkYXRhLmRhdGEpKSB7XG5cdFx0XHQvLyBcdC8vIFx0XHQvLyBjcmR0LnJlcGxhY2VUZXh0KHtcblx0XHRcdC8vIFx0Ly8gXHRcdC8vIFx0Y29sbGVjdGlvbjogY29sbGVjdGlvbixcblx0XHRcdC8vIFx0Ly8gXHRcdC8vIFx0ZG9jdW1lbnRfaWQ6IGlkLFxuXHRcdFx0Ly8gXHQvLyBcdFx0Ly8gXHRuYW1lOiBuYW1lLFxuXHRcdFx0Ly8gXHQvLyBcdFx0Ly8gXHR2YWx1ZTogZGF0YVsnZGF0YSddW25hbWVdLFxuXHRcdFx0Ly8gXHQvLyBcdFx0Ly8gfSlcblx0XHRcdFx0XHRcdFxuXHRcdFx0Ly8gXHQvLyBcdFx0ZWRpdG9yLnNldFRleHQoZGF0YVsnZGF0YSddW25hbWVdKTtcblx0XHRcdC8vIFx0Ly8gXHRcdGVsLmNydWRTZXR0ZWQgPSB0cnVlO1xuXHRcdFx0Ly8gXHQvLyBcdH1cblx0XHRcdC8vIFx0Ly8gfSk7XG5cdFx0XHQvLyB9KTtcblx0XHR9XG5cdFx0XG5cdFx0aW5pdEV2ZW50KGVsZW1lbnQsIGVkaXRvcikge1xuXHRcdFx0bGV0IF90aGlzID0gdGhpcztcblx0XHRcdGVkaXRvci5vbignZWRpdG9yLWNoYW5nZScsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFxuXHRcdFx0XHR2YXIgdmFsdWUgPSBlZGl0b3IuZ2V0VGV4dCgpO1xuXHRcdFx0XHR2YXIgaWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKTtcblx0XHRcdFx0IF90aGlzLnJlcXVlc3REb2N1bWVudElEKGVsZW1lbnQpXG5cdFx0XHRcdCBcblx0XHRcdFx0aWYgKCFpZCkgcmV0dXJuO1xuXHRcdFx0XHRcblx0XHRcdFx0dmFyIHRhcmdldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1nZXRfdmFsdWU9XCInICsgaWQgKyAnXCJdJyk7XG5cdFx0XHRcdFxuXHRcdFx0XHR0YXJnZXRzLmZvckVhY2goKHRhcmdldCkgPT4ge1xuXHRcdFx0XHRcdGlmKHRhcmdldC5ub2RlTmFtZSA9PSAnSUZSQU1FJyl7XG5cdFx0XHRcdFx0XHRcdGxldCBkb2N1bWVudF9pZnJhbWUgPSB0YXJnZXQuY29udGVudERvY3VtZW50O1xuXHRcdFx0XHRcdFx0XHR0YXJnZXQuc3JjZG9jID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZih0YXJnZXQuaW5uZXJIVE1MKSAhPSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRcdFx0XHRcdHRhcmdldC5pbm5lckhUTUwgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdH1lbHNlIGlmICh0eXBlb2YodGFyZ2V0LnZhbHVlKSAhPSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRcdFx0XHRcdHRhcmdldC52YWx1ZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh0eXBlb2YodGFyZ2V0LnRleHRDb250ZW50KSAhPSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRcdFx0XHRcdHRhcmdldC50ZXh0Q29udGVudCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRcdGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2V0LWRvY3VtZW50X2lkJywgZnVuY3Rpb24oZXZlbnQpe1xuXHRcdFx0XHRjb25zdCBvbGRfZGF0YSA9IGVkaXRvci5nZXRUZXh0KCk7XG5cdFx0XHRcdF90aGlzLmluaXRZU29ja2V0KGVsZW1lbnQsIGVkaXRvciwgb2xkX2RhdGEpO1xuXHRcdFx0XHRfdGhpcy5zYXZlRGF0YUludG9EQihlbGVtZW50LCBvbGRfZGF0YSk7XG5cdFx0XHRcdFxuXHRcdFx0fSlcblx0XHRcdFxuXHRcdFx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGlja2VkLXN1Ym1pdEJ0bicsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjb25zdCBvbGRfZGF0YSA9IGVkaXRvci5nZXRUZXh0KCk7XG5cdFx0XHRcdF90aGlzLnNhdmVEYXRhSW50b0RCKGVsZW1lbnQsIG9sZF9kYXRhKTtcblx0XHRcdFx0ZWRpdG9yLnNldFRleHQob2xkX2RhdGEpXG5cdFx0XHR9KVxuXHRcdH1cblx0XHRcblx0XHRnZW5lcmF0ZVR5cGVOYW1lKGVsZW1lbnQpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGxldCB7IGNvbGxlY3Rpb24sIG5hbWUsIGRvY3VtZW50X2lkIH0gPSBjcnVkLmdldEF0dHIoZWxlbWVudClcblx0XHRcdFx0Y29sbGVjdGlvbiA9IGNvbGxlY3Rpb24gfHwgJ18nXG5cdFx0XHRcdG5hbWUgPSBuYW1lIHx8ICdfJ1xuXHRcdFx0XHRkb2N1bWVudF9pZCA9IGRvY3VtZW50X2lkIHx8ICdfJ1xuXHRcdFx0XHRjb25zdCBpbmZvID0geyBvcmc6Y29uZmlnLm9yZ2FuaXphdGlvbl9JZCAsIGNvbGxlY3Rpb24sIGRvY3VtZW50X2lkLCBuYW1lIH1cblx0XHRcdFx0cmV0dXJuIGJ0b2EoSlNPTi5zdHJpbmdpZnkoaW5mbykpOyBcblx0XHRcdH1jYXRjaChlcnJvcikge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXF1ZXN0RG9jdW1lbnRJRChlbGVtZW50KSB7XG5cdFx0XHRjb25zdCBkb2N1bWVudF9pZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJyk7XG5cdFx0XHRjb25zdCByZWFsdGltZSA9IGNydWQuaXNSZWFsdGltZUF0dHIoZWxlbWVudCk7XG5cdFx0XHRpZiAoIWRvY3VtZW50X2lkICYmIHJlYWx0aW1lKSB7XG5cdFx0XHRcdENvQ3JlYXRlRm9ybS5yZXF1ZXN0KHtlbGVtZW50fSlcblx0XHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZG9jdW1lbnRfaWQnLCAncGVuZGluZycpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHRzYXZlRGF0YUludG9EQihlbGVtZW50LCB2YWx1ZSkge1xuXHRcdFx0Y29uc3QgeyBjb2xsZWN0aW9uLCBkb2N1bWVudF9pZCwgbmFtZSB9ID0gY3J1ZC5nZXRBdHRyKGVsZW1lbnQpXG5cdFx0XHRpZiAoIWNydWQuaXNTYXZlQXR0cihlbGVtZW50KSB8fCBkb2N1bWVudF9pZCA9PSAnbnVsbCcpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Y3JkdC5yZXBsYWNlVGV4dCh7XG5cdFx0XHRcdGNvbGxlY3Rpb24sIGRvY3VtZW50X2lkLCBcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFtuYW1lXTogdmFsdWUsXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0fVxuXG5cdFx0cGFyc2VUeXBlTmFtZShuYW1lKSB7XG5cdFx0XHRjb25zdCBkYXRhID0gSlNPTi5wYXJzZShhdG9iKG5hbWUpKTtcblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH1cblx0XG5cdH0vL2VuZCBDbGFzcyBDb0NyZWF0ZVlqc1F1aWxsXG5cdFxuXHRjb25zdCBvYmpfY29jcmVhdGVxdWlsbCA9IG5ldyBDb0NyZWF0ZVlqc1F1aWxsKCcucXVpbGwnKTtcblx0LyoqXG5cdCAqIEluaXRpYWxpemF0aW9uIGFsbCBPQkpTIHdpdGggY2xhc3MgLnF1aWxsXG5cdCovXG5cdG9ial9jb2NyZWF0ZXF1aWxsLmluaXQoKVxuXG5cdC8vIEB0cy1pZ25vcmVcblx0d2luZG93LkNvQ3JlYXRlUXVpbGwgPSBvYmpfY29jcmVhdGVxdWlsbFxuXG5cdGlmIChDb0NyZWF0ZU9ic2VydmVyKSB7XG5cdFx0Q29DcmVhdGVPYnNlcnZlci5pbml0KHtcblx0XHRcdG5hbWU6ICdDb0NyZWF0ZVF1aWxsJywgXG5cdFx0XHRvYnNlcnZlOiBbJ3N1YnRyZWUnLCAnY2hpbGRMaXN0J10sXG5cdFx0XHRpbmNsdWRlOiAnLnF1aWxsJywgXG5cdFx0XHRjYWxsYmFjazogZnVuY3Rpb24obXV0YXRpb24pIHtcblx0XHRcdFx0Q29DcmVhdGVRdWlsbC5faW5pdChtdXRhdGlvbi50YXJnZXQpXG5cdFx0XHR9XG5cdFx0fSlcblx0XHRcblx0fVxuXHRcblx0aWYgKENvQ3JlYXRlRm9ybSkge1xuXHRcdENvQ3JlYXRlRm9ybS5pbml0KHtcblx0XHRcdG5hbWU6ICdDb0NyZWF0ZVF1aWxsJyxcblx0XHRcdHNlbGVjdG9yOiAnLnF1aWxsJyxcblx0XHRcdGNhbGxiYWNrOiBmdW5jdGlvbihlbCkge1xuXHRcdFx0XHRcblx0XHRcdH1cblx0XHR9KVxuXHR9XG5cdFxuLy99KTsvL2VuZCB3aW5kb3cgTE9BRFxuZXhwb3J0IGRlZmF1bHQgQ29DcmVhdGVZanNRdWlsbDsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/index.js\n")},"./src/js/RelativePosition.js":function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.compareRelativePositions = exports.createAbsolutePositionFromRelativePosition = exports.decodeRelativePosition = exports.readRelativePosition = exports.encodeRelativePosition = exports.writeRelativePosition = exports.createRelativePositionFromTypeIndex = exports.createRelativePosition = exports.createAbsolutePosition = exports.AbsolutePosition = exports.createRelativePositionFromJSON = exports.RelativePosition = void 0;\n\nvar _internals = __webpack_require__(/*! yjs/src/internals.js */ "./node_modules/yjs/src/internals.js");\n\nvar encoding = _interopRequireWildcard(__webpack_require__(/*! lib0/encoding.js */ "./node_modules/lib0/encoding.js"));\n\nvar decoding = _interopRequireWildcard(__webpack_require__(/*! lib0/decoding.js */ "./node_modules/lib0/decoding.js"));\n\nvar error = _interopRequireWildcard(__webpack_require__(/*! lib0/error.js */ "./node_modules/lib0/error.js"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n/**\n * A relative position is based on the Yjs model and is not affected by document changes.\n * E.g. If you place a relative position before a certain character, it will always point to this character.\n * If you place a relative position at the end of a type, it will always point to the end of the type.\n *\n * A numeric position is often unsuited for user selections, because it does not change when content is inserted\n * before or after.\n *\n * ```Insert(0, \'x\')(\'a|bc\') = \'xa|bc\'``` Where | is the relative position.\n *\n * One of the properties must be defined.\n *\n * @example\n *   // Current cursor position is at position 10\n *   const relativePosition = createRelativePositionFromIndex(yText, 10)\n *   // modify yText\n *   yText.insert(0, \'abc\')\n *   yText.delete(3, 10)\n *   // Compute the cursor position\n *   const absolutePosition = createAbsolutePositionFromRelativePosition(y, relativePosition)\n *   absolutePosition.type === yText // => true\n *   console.log(\'cursor location is \' + absolutePosition.index) // => cursor location is 3\n *\n */\nclass RelativePosition {\n  /**\n   * @param {ID|null} type\n   * @param {string|null} tname\n   * @param {ID|null} item\n   */\n  constructor(type, tname, item) {\n    /**\n     * @type {ID|null}\n     */\n    this.type = type;\n    /**\n     * @type {string|null}\n     */\n\n    this.tname = tname;\n    /**\n     * @type {ID | null}\n     */\n\n    this.item = item;\n  }\n\n}\n/**\n * @param {Object} json\n * @return {RelativePosition}\n *\n * @function\n */\n\n\nexports.RelativePosition = RelativePosition;\n\nconst createRelativePositionFromJSON = json => new RelativePosition(json.type == null ? null : (0, _internals.createID)(json.type.client, json.type.clock), json.tname || null, json.item == null ? null : (0, _internals.createID)(json.item.client, json.item.clock));\n\nexports.createRelativePositionFromJSON = createRelativePositionFromJSON;\n\nclass AbsolutePosition {\n  /**\n   * @param {AbstractType<any>} type\n   * @param {number} index\n   */\n  constructor(type, index) {\n    /**\n     * @type {AbstractType<any>}\n     */\n    this.type = type;\n    /**\n     * @type {number}\n     */\n\n    this.index = index;\n  }\n\n}\n/**\n * @param {AbstractType<any>} type\n * @param {number} index\n *\n * @function\n */\n\n\nexports.AbsolutePosition = AbsolutePosition;\n\nconst createAbsolutePosition = (type, index) => new AbsolutePosition(type, index);\n/**\n * @param {AbstractType<any>} type\n * @param {ID|null} item\n *\n * @function\n */\n\n\nexports.createAbsolutePosition = createAbsolutePosition;\n\nconst createRelativePosition = (type, item) => {\n  let typeid = null;\n  let tname = null;\n\n  if (type._item === null) {\n    tname = (0, _internals.findRootTypeKey)(type);\n  } else {\n    typeid = type._item.id;\n  }\n\n  return new RelativePosition(typeid, tname, item);\n};\n/**\n * Create a relativePosition based on a absolute position.\n *\n * @param {AbstractType<any>} type The base type (e.g. YText or YArray).\n * @param {number} index The absolute position.\n * @return {RelativePosition}\n *\n * @function\n */\n\n\nexports.createRelativePosition = createRelativePosition;\n\nconst createRelativePositionFromTypeIndex = (type, index) => {\n  let t = type._start;\n\n  while (t !== null) {\n    if (!t.deleted && t.countable) {\n      if (t.length > index) {\n        // case 1: found position somewhere in the linked list\n        return createRelativePosition(type, (0, _internals.createID)(t.id.client, t.id.clock + index));\n      }\n\n      index -= t.length;\n    }\n\n    t = t.right;\n  }\n\n  return createRelativePosition(type, null);\n};\n/**\n * @param {encoding.Encoder} encoder\n * @param {RelativePosition} rpos\n *\n * @function\n */\n\n\nexports.createRelativePositionFromTypeIndex = createRelativePositionFromTypeIndex;\n\nconst writeRelativePosition = (encoder, rpos) => {\n  const {\n    type,\n    tname,\n    item\n  } = rpos;\n\n  if (item !== null) {\n    encoding.writeVarUint(encoder, 0);\n    (0, _internals.writeID)(encoder, item);\n  } else if (tname !== null) {\n    // case 2: found position at the end of the list and type is stored in y.share\n    encoding.writeUint8(encoder, 1);\n    encoding.writeVarString(encoder, tname);\n  } else if (type !== null) {\n    // case 3: found position at the end of the list and type is attached to an item\n    encoding.writeUint8(encoder, 2);\n    (0, _internals.writeID)(encoder, type);\n  } else {\n    throw error.unexpectedCase();\n  }\n\n  return encoder;\n};\n/**\n * @param {RelativePosition} rpos\n * @return {Uint8Array}\n */\n\n\nexports.writeRelativePosition = writeRelativePosition;\n\nconst encodeRelativePosition = rpos => {\n  const encoder = encoding.createEncoder();\n  writeRelativePosition(encoder, rpos);\n  return encoding.toUint8Array(encoder);\n};\n/**\n * @param {decoding.Decoder} decoder\n * @return {RelativePosition|null}\n *\n * @function\n */\n\n\nexports.encodeRelativePosition = encodeRelativePosition;\n\nconst readRelativePosition = decoder => {\n  let type = null;\n  let tname = null;\n  let itemID = null;\n\n  switch (decoding.readVarUint(decoder)) {\n    case 0:\n      // case 1: found position somewhere in the linked list\n      itemID = (0, _internals.readID)(decoder);\n      break;\n\n    case 1:\n      // case 2: found position at the end of the list and type is stored in y.share\n      tname = decoding.readVarString(decoder);\n      break;\n\n    case 2:\n      {\n        // case 3: found position at the end of the list and type is attached to an item\n        type = (0, _internals.readID)(decoder);\n      }\n  }\n\n  return new RelativePosition(type, tname, itemID);\n};\n/**\n * @param {Uint8Array} uint8Array\n * @return {RelativePosition|null}\n */\n\n\nexports.readRelativePosition = readRelativePosition;\n\nconst decodeRelativePosition = uint8Array => readRelativePosition(decoding.createDecoder(uint8Array));\n/**\n * @param {RelativePosition} rpos\n * @param {Doc} doc\n * @return {AbsolutePosition|null}\n *\n * @function\n */\n\n\nexports.decodeRelativePosition = decodeRelativePosition;\n\nconst createAbsolutePositionFromRelativePosition = (rpos, doc) => {\n  const store = doc.store;\n  const rightID = rpos.item;\n  const typeID = rpos.type;\n  const tname = rpos.tname;\n  let type = null;\n  let index = 0;\n\n  if (rightID !== null) {\n    if ((0, _internals.getState)(store, rightID.client) <= rightID.clock) {\n      return null;\n    }\n\n    const right = (0, _internals.getItem)(store, rightID);\n    /*if (!(right instanceof Item)) {\n      return null\n    }*/\n\n    index = right.deleted || !right.countable ? 0 : rightID.clock - right.id.clock;\n    let n = right.left;\n\n    while (n !== null) {\n      if (!n.deleted && n.countable) {\n        index += n.length;\n      }\n\n      n = n.left;\n    }\n\n    type = right.parent;\n  } else {\n    if (tname !== null) {\n      type = doc.get(tname);\n    } else if (typeID !== null) {\n      if ((0, _internals.getState)(store, typeID.client) <= typeID.clock) {\n        // type does not exist yet\n        return null;\n      }\n\n      const struct = (0, _internals.getItem)(store, typeID);\n\n      if (struct instanceof _internals.Item && struct.content instanceof _internals.ContentType) {\n        type = struct.content.type;\n      } else {\n        // struct is garbage collected\n        return null;\n      }\n    } else {\n      throw error.unexpectedCase();\n    }\n\n    index = type._length;\n  }\n\n  if (type._item !== null && type._item.deleted) {\n    return null;\n  }\n\n  return createAbsolutePosition(type, index);\n};\n/**\n * @param {RelativePosition|null} a\n * @param {RelativePosition|null} b\n *\n * @function\n */\n\n\nexports.createAbsolutePositionFromRelativePosition = createAbsolutePositionFromRelativePosition;\n\nconst compareRelativePositions = (a, b) => a === b || a !== null && b !== null && a.tname === b.tname && (0, _internals.compareIDs)(a.item, b.item) && (0, _internals.compareIDs)(a.type, b.type);\n\nexports.compareRelativePositions = compareRelativePositions;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5xdWlsbC8uL3NyYy9qcy9SZWxhdGl2ZVBvc2l0aW9uLmpzPzA2MmQiXSwibmFtZXMiOlsiUmVsYXRpdmVQb3NpdGlvbiIsImNvbnN0cnVjdG9yIiwidHlwZSIsInRuYW1lIiwiaXRlbSIsImNyZWF0ZVJlbGF0aXZlUG9zaXRpb25Gcm9tSlNPTiIsImpzb24iLCJjbGllbnQiLCJjbG9jayIsIkFic29sdXRlUG9zaXRpb24iLCJpbmRleCIsImNyZWF0ZUFic29sdXRlUG9zaXRpb24iLCJjcmVhdGVSZWxhdGl2ZVBvc2l0aW9uIiwidHlwZWlkIiwiX2l0ZW0iLCJpZCIsImNyZWF0ZVJlbGF0aXZlUG9zaXRpb25Gcm9tVHlwZUluZGV4IiwidCIsIl9zdGFydCIsImRlbGV0ZWQiLCJjb3VudGFibGUiLCJsZW5ndGgiLCJyaWdodCIsIndyaXRlUmVsYXRpdmVQb3NpdGlvbiIsImVuY29kZXIiLCJycG9zIiwiZW5jb2RpbmciLCJ3cml0ZVZhclVpbnQiLCJ3cml0ZVVpbnQ4Iiwid3JpdGVWYXJTdHJpbmciLCJlcnJvciIsInVuZXhwZWN0ZWRDYXNlIiwiZW5jb2RlUmVsYXRpdmVQb3NpdGlvbiIsImNyZWF0ZUVuY29kZXIiLCJ0b1VpbnQ4QXJyYXkiLCJyZWFkUmVsYXRpdmVQb3NpdGlvbiIsImRlY29kZXIiLCJpdGVtSUQiLCJkZWNvZGluZyIsInJlYWRWYXJVaW50IiwicmVhZFZhclN0cmluZyIsImRlY29kZVJlbGF0aXZlUG9zaXRpb24iLCJ1aW50OEFycmF5IiwiY3JlYXRlRGVjb2RlciIsImNyZWF0ZUFic29sdXRlUG9zaXRpb25Gcm9tUmVsYXRpdmVQb3NpdGlvbiIsImRvYyIsInN0b3JlIiwicmlnaHRJRCIsInR5cGVJRCIsIm4iLCJsZWZ0IiwicGFyZW50IiwiZ2V0Iiwic3RydWN0IiwiSXRlbSIsImNvbnRlbnQiLCJDb250ZW50VHlwZSIsIl9sZW5ndGgiLCJjb21wYXJlUmVsYXRpdmVQb3NpdGlvbnMiLCJhIiwiYiJd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InNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHtcbiAgZ2V0SXRlbSxcbiAgY3JlYXRlSUQsXG4gIHdyaXRlSUQsXG4gIHJlYWRJRCxcbiAgY29tcGFyZUlEcyxcbiAgZ2V0U3RhdGUsXG4gIGZpbmRSb290VHlwZUtleSxcbiAgSXRlbSxcbiAgQ29udGVudFR5cGUsXG4gIElELCBEb2MsIEFic3RyYWN0VHlwZSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG59IGZyb20gJ3lqcy9zcmMvaW50ZXJuYWxzLmpzJ1xuXG5pbXBvcnQgKiBhcyBlbmNvZGluZyBmcm9tICdsaWIwL2VuY29kaW5nLmpzJ1xuaW1wb3J0ICogYXMgZGVjb2RpbmcgZnJvbSAnbGliMC9kZWNvZGluZy5qcydcbmltcG9ydCAqIGFzIGVycm9yIGZyb20gJ2xpYjAvZXJyb3IuanMnXG5cbi8qKlxuICogQSByZWxhdGl2ZSBwb3NpdGlvbiBpcyBiYXNlZCBvbiB0aGUgWWpzIG1vZGVsIGFuZCBpcyBub3QgYWZmZWN0ZWQgYnkgZG9jdW1lbnQgY2hhbmdlcy5cbiAqIEUuZy4gSWYgeW91IHBsYWNlIGEgcmVsYXRpdmUgcG9zaXRpb24gYmVmb3JlIGEgY2VydGFpbiBjaGFyYWN0ZXIsIGl0IHdpbGwgYWx3YXlzIHBvaW50IHRvIHRoaXMgY2hhcmFjdGVyLlxuICogSWYgeW91IHBsYWNlIGEgcmVsYXRpdmUgcG9zaXRpb24gYXQgdGhlIGVuZCBvZiBhIHR5cGUsIGl0IHdpbGwgYWx3YXlzIHBvaW50IHRvIHRoZSBlbmQgb2YgdGhlIHR5cGUuXG4gKlxuICogQSBudW1lcmljIHBvc2l0aW9uIGlzIG9mdGVuIHVuc3VpdGVkIGZvciB1c2VyIHNlbGVjdGlvbnMsIGJlY2F1c2UgaXQgZG9lcyBub3QgY2hhbmdlIHdoZW4gY29udGVudCBpcyBpbnNlcnRlZFxuICogYmVmb3JlIG9yIGFmdGVyLlxuICpcbiAqIGBgYEluc2VydCgwLCAneCcpKCdhfGJjJykgPSAneGF8YmMnYGBgIFdoZXJlIHwgaXMgdGhlIHJlbGF0aXZlIHBvc2l0aW9uLlxuICpcbiAqIE9uZSBvZiB0aGUgcHJvcGVydGllcyBtdXN0IGJlIGRlZmluZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqICAgLy8gQ3VycmVudCBjdXJzb3IgcG9zaXRpb24gaXMgYXQgcG9zaXRpb24gMTBcbiAqICAgY29uc3QgcmVsYXRpdmVQb3NpdGlvbiA9IGNyZWF0ZVJlbGF0aXZlUG9zaXRpb25Gcm9tSW5kZXgoeVRleHQsIDEwKVxuICogICAvLyBtb2RpZnkgeVRleHRcbiAqICAgeVRleHQuaW5zZXJ0KDAsICdhYmMnKVxuICogICB5VGV4dC5kZWxldGUoMywgMTApXG4gKiAgIC8vIENvbXB1dGUgdGhlIGN1cnNvciBwb3NpdGlvblxuICogICBjb25zdCBhYnNvbHV0ZVBvc2l0aW9uID0gY3JlYXRlQWJzb2x1dGVQb3NpdGlvbkZyb21SZWxhdGl2ZVBvc2l0aW9uKHksIHJlbGF0aXZlUG9zaXRpb24pXG4gKiAgIGFic29sdXRlUG9zaXRpb24udHlwZSA9PT0geVRleHQgLy8gPT4gdHJ1ZVxuICogICBjb25zb2xlLmxvZygnY3Vyc29yIGxvY2F0aW9uIGlzICcgKyBhYnNvbHV0ZVBvc2l0aW9uLmluZGV4KSAvLyA9PiBjdXJzb3IgbG9jYXRpb24gaXMgM1xuICpcbiAqL1xuZXhwb3J0IGNsYXNzIFJlbGF0aXZlUG9zaXRpb24ge1xuICAvKipcbiAgICogQHBhcmFtIHtJRHxudWxsfSB0eXBlXG4gICAqIEBwYXJhbSB7c3RyaW5nfG51bGx9IHRuYW1lXG4gICAqIEBwYXJhbSB7SUR8bnVsbH0gaXRlbVxuICAgKi9cbiAgY29uc3RydWN0b3IgKHR5cGUsIHRuYW1lLCBpdGVtKSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge0lEfG51bGx9XG4gICAgICovXG4gICAgdGhpcy50eXBlID0gdHlwZVxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtzdHJpbmd8bnVsbH1cbiAgICAgKi9cbiAgICB0aGlzLnRuYW1lID0gdG5hbWVcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7SUQgfCBudWxsfVxuICAgICAqL1xuICAgIHRoaXMuaXRlbSA9IGl0ZW1cbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0fSBqc29uXG4gKiBAcmV0dXJuIHtSZWxhdGl2ZVBvc2l0aW9ufVxuICpcbiAqIEBmdW5jdGlvblxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlUmVsYXRpdmVQb3NpdGlvbkZyb21KU09OID0ganNvbiA9PiBuZXcgUmVsYXRpdmVQb3NpdGlvbihqc29uLnR5cGUgPT0gbnVsbCA/IG51bGwgOiBjcmVhdGVJRChqc29uLnR5cGUuY2xpZW50LCBqc29uLnR5cGUuY2xvY2spLCBqc29uLnRuYW1lIHx8IG51bGwsIGpzb24uaXRlbSA9PSBudWxsID8gbnVsbCA6IGNyZWF0ZUlEKGpzb24uaXRlbS5jbGllbnQsIGpzb24uaXRlbS5jbG9jaykpXG5cbmV4cG9ydCBjbGFzcyBBYnNvbHV0ZVBvc2l0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7QWJzdHJhY3RUeXBlPGFueT59IHR5cGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gICAqL1xuICBjb25zdHJ1Y3RvciAodHlwZSwgaW5kZXgpIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7QWJzdHJhY3RUeXBlPGFueT59XG4gICAgICovXG4gICAgdGhpcy50eXBlID0gdHlwZVxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5pbmRleCA9IGluZGV4XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0Fic3RyYWN0VHlwZTxhbnk+fSB0eXBlXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAqXG4gKiBAZnVuY3Rpb25cbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUFic29sdXRlUG9zaXRpb24gPSAodHlwZSwgaW5kZXgpID0+IG5ldyBBYnNvbHV0ZVBvc2l0aW9uKHR5cGUsIGluZGV4KVxuXG4vKipcbiAqIEBwYXJhbSB7QWJzdHJhY3RUeXBlPGFueT59IHR5cGVcbiAqIEBwYXJhbSB7SUR8bnVsbH0gaXRlbVxuICpcbiAqIEBmdW5jdGlvblxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlUmVsYXRpdmVQb3NpdGlvbiA9ICh0eXBlLCBpdGVtKSA9PiB7XG4gIGxldCB0eXBlaWQgPSBudWxsXG4gIGxldCB0bmFtZSA9IG51bGxcbiAgaWYgKHR5cGUuX2l0ZW0gPT09IG51bGwpIHtcbiAgICB0bmFtZSA9IGZpbmRSb290VHlwZUtleSh0eXBlKVxuICB9IGVsc2Uge1xuICAgIHR5cGVpZCA9IHR5cGUuX2l0ZW0uaWRcbiAgfVxuICByZXR1cm4gbmV3IFJlbGF0aXZlUG9zaXRpb24odHlwZWlkLCB0bmFtZSwgaXRlbSlcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSByZWxhdGl2ZVBvc2l0aW9uIGJhc2VkIG9uIGEgYWJzb2x1dGUgcG9zaXRpb24uXG4gKlxuICogQHBhcmFtIHtBYnN0cmFjdFR5cGU8YW55Pn0gdHlwZSBUaGUgYmFzZSB0eXBlIChlLmcuIFlUZXh0IG9yIFlBcnJheSkuXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGFic29sdXRlIHBvc2l0aW9uLlxuICogQHJldHVybiB7UmVsYXRpdmVQb3NpdGlvbn1cbiAqXG4gKiBAZnVuY3Rpb25cbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVJlbGF0aXZlUG9zaXRpb25Gcm9tVHlwZUluZGV4ID0gKHR5cGUsIGluZGV4KSA9PiB7XG4gIGxldCB0ID0gdHlwZS5fc3RhcnRcbiAgd2hpbGUgKHQgIT09IG51bGwpIHtcbiAgICBpZiAoIXQuZGVsZXRlZCAmJiB0LmNvdW50YWJsZSkge1xuICAgICAgaWYgKHQubGVuZ3RoID4gaW5kZXgpIHtcbiAgICAgICAgLy8gY2FzZSAxOiBmb3VuZCBwb3NpdGlvbiBzb21ld2hlcmUgaW4gdGhlIGxpbmtlZCBsaXN0XG4gICAgICAgIHJldHVybiBjcmVhdGVSZWxhdGl2ZVBvc2l0aW9uKHR5cGUsIGNyZWF0ZUlEKHQuaWQuY2xpZW50LCB0LmlkLmNsb2NrICsgaW5kZXgpKVxuICAgICAgfVxuICAgICAgaW5kZXggLT0gdC5sZW5ndGhcbiAgICB9XG4gICAgdCA9IHQucmlnaHRcbiAgfVxuICByZXR1cm4gY3JlYXRlUmVsYXRpdmVQb3NpdGlvbih0eXBlLCBudWxsKVxufVxuXG4vKipcbiAqIEBwYXJhbSB7ZW5jb2RpbmcuRW5jb2Rlcn0gZW5jb2RlclxuICogQHBhcmFtIHtSZWxhdGl2ZVBvc2l0aW9ufSBycG9zXG4gKlxuICogQGZ1bmN0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCB3cml0ZVJlbGF0aXZlUG9zaXRpb24gPSAoZW5jb2RlciwgcnBvcykgPT4ge1xuICBjb25zdCB7IHR5cGUsIHRuYW1lLCBpdGVtIH0gPSBycG9zXG4gIGlmIChpdGVtICE9PSBudWxsKSB7XG4gICAgZW5jb2Rpbmcud3JpdGVWYXJVaW50KGVuY29kZXIsIDApXG4gICAgd3JpdGVJRChlbmNvZGVyLCBpdGVtKVxuICB9IGVsc2UgaWYgKHRuYW1lICE9PSBudWxsKSB7XG4gICAgLy8gY2FzZSAyOiBmb3VuZCBwb3NpdGlvbiBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0IGFuZCB0eXBlIGlzIHN0b3JlZCBpbiB5LnNoYXJlXG4gICAgZW5jb2Rpbmcud3JpdGVVaW50OChlbmNvZGVyLCAxKVxuICAgIGVuY29kaW5nLndyaXRlVmFyU3RyaW5nKGVuY29kZXIsIHRuYW1lKVxuICB9IGVsc2UgaWYgKHR5cGUgIT09IG51bGwpIHtcbiAgICAvLyBjYXNlIDM6IGZvdW5kIHBvc2l0aW9uIGF0IHRoZSBlbmQgb2YgdGhlIGxpc3QgYW5kIHR5cGUgaXMgYXR0YWNoZWQgdG8gYW4gaXRlbVxuICAgIGVuY29kaW5nLndyaXRlVWludDgoZW5jb2RlciwgMilcbiAgICB3cml0ZUlEKGVuY29kZXIsIHR5cGUpXG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgZXJyb3IudW5leHBlY3RlZENhc2UoKVxuICB9XG4gIHJldHVybiBlbmNvZGVyXG59XG5cbi8qKlxuICogQHBhcmFtIHtSZWxhdGl2ZVBvc2l0aW9ufSBycG9zXG4gKiBAcmV0dXJuIHtVaW50OEFycmF5fVxuICovXG5leHBvcnQgY29uc3QgZW5jb2RlUmVsYXRpdmVQb3NpdGlvbiA9IHJwb3MgPT4ge1xuICBjb25zdCBlbmNvZGVyID0gZW5jb2RpbmcuY3JlYXRlRW5jb2RlcigpXG4gIHdyaXRlUmVsYXRpdmVQb3NpdGlvbihlbmNvZGVyLCBycG9zKVxuICByZXR1cm4gZW5jb2RpbmcudG9VaW50OEFycmF5KGVuY29kZXIpXG59XG5cbi8qKlxuICogQHBhcmFtIHtkZWNvZGluZy5EZWNvZGVyfSBkZWNvZGVyXG4gKiBAcmV0dXJuIHtSZWxhdGl2ZVBvc2l0aW9ufG51bGx9XG4gKlxuICogQGZ1bmN0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCByZWFkUmVsYXRpdmVQb3NpdGlvbiA9IGRlY29kZXIgPT4ge1xuICBsZXQgdHlwZSA9IG51bGxcbiAgbGV0IHRuYW1lID0gbnVsbFxuICBsZXQgaXRlbUlEID0gbnVsbFxuICBzd2l0Y2ggKGRlY29kaW5nLnJlYWRWYXJVaW50KGRlY29kZXIpKSB7XG4gICAgY2FzZSAwOlxuICAgICAgLy8gY2FzZSAxOiBmb3VuZCBwb3NpdGlvbiBzb21ld2hlcmUgaW4gdGhlIGxpbmtlZCBsaXN0XG4gICAgICBpdGVtSUQgPSByZWFkSUQoZGVjb2RlcilcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAxOlxuICAgICAgLy8gY2FzZSAyOiBmb3VuZCBwb3NpdGlvbiBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0IGFuZCB0eXBlIGlzIHN0b3JlZCBpbiB5LnNoYXJlXG4gICAgICB0bmFtZSA9IGRlY29kaW5nLnJlYWRWYXJTdHJpbmcoZGVjb2RlcilcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAyOiB7XG4gICAgICAvLyBjYXNlIDM6IGZvdW5kIHBvc2l0aW9uIGF0IHRoZSBlbmQgb2YgdGhlIGxpc3QgYW5kIHR5cGUgaXMgYXR0YWNoZWQgdG8gYW4gaXRlbVxuICAgICAgdHlwZSA9IHJlYWRJRChkZWNvZGVyKVxuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3IFJlbGF0aXZlUG9zaXRpb24odHlwZSwgdG5hbWUsIGl0ZW1JRClcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IHVpbnQ4QXJyYXlcbiAqIEByZXR1cm4ge1JlbGF0aXZlUG9zaXRpb258bnVsbH1cbiAqL1xuZXhwb3J0IGNvbnN0IGRlY29kZVJlbGF0aXZlUG9zaXRpb24gPSB1aW50OEFycmF5ID0+IHJlYWRSZWxhdGl2ZVBvc2l0aW9uKGRlY29kaW5nLmNyZWF0ZURlY29kZXIodWludDhBcnJheSkpXG5cbi8qKlxuICogQHBhcmFtIHtSZWxhdGl2ZVBvc2l0aW9ufSBycG9zXG4gKiBAcGFyYW0ge0RvY30gZG9jXG4gKiBAcmV0dXJuIHtBYnNvbHV0ZVBvc2l0aW9ufG51bGx9XG4gKlxuICogQGZ1bmN0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVBYnNvbHV0ZVBvc2l0aW9uRnJvbVJlbGF0aXZlUG9zaXRpb24gPSAocnBvcywgZG9jKSA9PiB7XG4gIGNvbnN0IHN0b3JlID0gZG9jLnN0b3JlXG4gIGNvbnN0IHJpZ2h0SUQgPSBycG9zLml0ZW1cbiAgY29uc3QgdHlwZUlEID0gcnBvcy50eXBlXG4gIGNvbnN0IHRuYW1lID0gcnBvcy50bmFtZVxuICBsZXQgdHlwZSA9IG51bGxcbiAgbGV0IGluZGV4ID0gMFxuICBpZiAocmlnaHRJRCAhPT0gbnVsbCkge1xuICAgIGlmIChnZXRTdGF0ZShzdG9yZSwgcmlnaHRJRC5jbGllbnQpIDw9IHJpZ2h0SUQuY2xvY2spIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIGNvbnN0IHJpZ2h0ID0gZ2V0SXRlbShzdG9yZSwgcmlnaHRJRClcbiAgICAvKmlmICghKHJpZ2h0IGluc3RhbmNlb2YgSXRlbSkpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfSovXG4gICAgaW5kZXggPSByaWdodC5kZWxldGVkIHx8ICFyaWdodC5jb3VudGFibGUgPyAwIDogcmlnaHRJRC5jbG9jayAtIHJpZ2h0LmlkLmNsb2NrXG4gICAgbGV0IG4gPSByaWdodC5sZWZ0XG4gICAgd2hpbGUgKG4gIT09IG51bGwpIHtcbiAgICAgIGlmICghbi5kZWxldGVkICYmIG4uY291bnRhYmxlKSB7XG4gICAgICAgIGluZGV4ICs9IG4ubGVuZ3RoXG4gICAgICB9XG4gICAgICBuID0gbi5sZWZ0XG4gICAgfVxuICAgIHR5cGUgPSByaWdodC5wYXJlbnRcbiAgfSBlbHNlIHtcbiAgICBpZiAodG5hbWUgIT09IG51bGwpIHtcbiAgICAgIHR5cGUgPSBkb2MuZ2V0KHRuYW1lKVxuICAgIH0gZWxzZSBpZiAodHlwZUlEICE9PSBudWxsKSB7XG4gICAgICBpZiAoZ2V0U3RhdGUoc3RvcmUsIHR5cGVJRC5jbGllbnQpIDw9IHR5cGVJRC5jbG9jaykge1xuICAgICAgICAvLyB0eXBlIGRvZXMgbm90IGV4aXN0IHlldFxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgICAgY29uc3Qgc3RydWN0ID0gZ2V0SXRlbShzdG9yZSwgdHlwZUlEKVxuICAgICAgaWYgKHN0cnVjdCBpbnN0YW5jZW9mIEl0ZW0gJiYgc3RydWN0LmNvbnRlbnQgaW5zdGFuY2VvZiBDb250ZW50VHlwZSkge1xuICAgICAgICB0eXBlID0gc3RydWN0LmNvbnRlbnQudHlwZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3RydWN0IGlzIGdhcmJhZ2UgY29sbGVjdGVkXG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGVycm9yLnVuZXhwZWN0ZWRDYXNlKClcbiAgICB9XG4gICAgaW5kZXggPSB0eXBlLl9sZW5ndGhcbiAgfVxuICBpZiAodHlwZS5faXRlbSAhPT0gbnVsbCAmJiB0eXBlLl9pdGVtLmRlbGV0ZWQpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIHJldHVybiBjcmVhdGVBYnNvbHV0ZVBvc2l0aW9uKHR5cGUsIGluZGV4KVxufVxuXG4vKipcbiAqIEBwYXJhbSB7UmVsYXRpdmVQb3NpdGlvbnxudWxsfSBhXG4gKiBAcGFyYW0ge1JlbGF0aXZlUG9zaXRpb258bnVsbH0gYlxuICpcbiAqIEBmdW5jdGlvblxuICovXG5leHBvcnQgY29uc3QgY29tcGFyZVJlbGF0aXZlUG9zaXRpb25zID0gKGEsIGIpID0+IGEgPT09IGIgfHwgKFxuICBhICE9PSBudWxsICYmIGIgIT09IG51bGwgJiYgYS50bmFtZSA9PT0gYi50bmFtZSAmJiBjb21wYXJlSURzKGEuaXRlbSwgYi5pdGVtKSAmJiBjb21wYXJlSURzKGEudHlwZSwgYi50eXBlKVxuKVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/RelativePosition.js\n')},"./src/js/y-quill_binding.js":function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.QuillBinding = exports.normQuillDelta = void 0;\n\nvar _mutex = __webpack_require__(/*! lib0/mutex.js */ \"./node_modules/lib0/mutex.js\");\n\nvar Y = _interopRequireWildcard(__webpack_require__(/*! yjs */ \"./node_modules/yjs/dist/yjs.mjs\"));\n\nvar _awareness = __webpack_require__(/*! y-protocols/awareness.js */ \"./node_modules/y-protocols/awareness.js\");\n\nvar Ys = _interopRequireWildcard(__webpack_require__(/*! ./RelativePosition.js */ \"./src/js/RelativePosition.js\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n/**\n * @module bindings/quill\n */\n// eslint-disable-line\n// eslint-disable-line\n\n/**\n * Removes the pending '\\n's if it has no attributes.\n */\nconst normQuillDelta = delta => {\n  if (delta.length > 0) {\n    const d = delta[delta.length - 1];\n    const insert = d.insert;\n\n    if (d.attributes === undefined && insert !== undefined && insert.slice(-1) === '\\n') {\n      delta = delta.slice();\n      let ins = insert.slice(0, -1);\n\n      while (ins.slice(-1) === '\\n') {\n        ins = ins.slice(0, -1);\n      }\n\n      delta[delta.length - 1] = {\n        insert: ins\n      };\n\n      if (ins.length === 0) {\n        delta.pop();\n      }\n\n      return delta;\n    }\n  }\n\n  return delta;\n};\n/**\n * @param {any} quillCursors\n */\n\n\nexports.normQuillDelta = normQuillDelta;\n\nconst updateCursor = (quillCursors, aw, clientId, doc, type) => {\n  try {\n    if (aw && aw.cursor && clientId !== doc.clientID) {\n      const user = aw.user || {};\n      const color = user.color || '#ffa500';\n      const name = user.name || `User: ${clientId}`;\n      quillCursors.createCursor(clientId.toString(), name, color);\n      const anchor = Ys.createAbsolutePositionFromRelativePosition(Y.createRelativePositionFromJSON(aw.cursor.anchor), doc);\n      const head = Ys.createAbsolutePositionFromRelativePosition(Y.createRelativePositionFromJSON(aw.cursor.head), doc);\n\n      if (anchor && head && anchor.type === type) {\n        quillCursors.moveCursor(clientId.toString(), {\n          index: anchor.index,\n          length: head.index - anchor.index\n        });\n      }\n    } else {\n      quillCursors.removeCursor(clientId.toString());\n    }\n  } catch (err) {\n    console.error(err);\n  }\n};\n\nclass QuillBinding {\n  /**\n   * @param {Y.Text} type\n   * @param {any} quill\n   * @param {Awareness} [awareness]\n   */\n  constructor(type, quill, awareness) {\n    const mux = (0, _mutex.createMutex)();\n    const doc =\n    /** @type {Y.Doc} */\n    type.doc;\n    this.mux = mux;\n    this.type = type;\n    this.doc = doc;\n    this.quill = quill;\n    const quillCursors = quill.getModule('cursors') || null;\n    this.quillCursors = quillCursors; // This object contains all attributes used in the quill instance\n\n    this._negatedUsedFormats = {};\n    this.awareness = awareness;\n\n    this._awarenessChange = ({\n      added,\n      removed,\n      updated\n    }) => {\n      const states =\n      /** @type {Awareness} */\n      awareness.getStates();\n      added.forEach(id => {\n        updateCursor(quillCursors, states.get(id), id, doc, type);\n      });\n      updated.forEach(id => {\n        updateCursor(quillCursors, states.get(id), id, doc, type);\n      });\n      removed.forEach(id => {\n        quillCursors.removeCursor(id.toString());\n      });\n    };\n\n    this._typeObserver = event => {\n      mux(() => {\n        const eventDelta = event.delta; // We always explicitly set attributes, otherwise concurrent edits may\n        // result in quill assuming that a text insertion shall inherit existing\n        // attributes.\n\n        const el = quill.options.container;\n        const readValue = el.getAttribute('data-read_value') != 'false';\n\n        if (!readValue) {\n          return;\n        }\n\n        const delta = [];\n\n        for (let i = 0; i < eventDelta.length; i++) {\n          const d = eventDelta[i];\n\n          if (d.insert !== undefined) {\n            delta.push(Object.assign({}, d, {\n              attributes: Object.assign({}, this._negatedUsedFormats, d.attributes || {})\n            }));\n          } else {\n            delta.push(d);\n          }\n        }\n\n        quill.updateContents(delta, 'yjs');\n        el.crudSetted = true;\n      });\n    };\n\n    type.observe(this._typeObserver);\n\n    this._quillObserver = (eventType, delta) => {\n      const el = quill.options.container;\n      const realtime = el.getAttribute('data-realtime') != 'false';\n      const saveValue = el.getAttribute('data-save_value') != 'false';\n      const readValue = el.getAttribute('data-read_value') != 'false';\n      if (!realtime || !saveValue) return;\n\n      if (!readValue) {\n        //. total value\n        type.delete(0, type.toString().length);\n        type.insert(0, quill.getText());\n        return;\n      }\n\n      if (delta && delta.ops) {\n        // update content\n        const ops = delta.ops;\n        ops.forEach(op => {\n          if (op.attributes !== undefined) {\n            for (let key in op.attributes) {\n              if (this._negatedUsedFormats[key] === undefined) {\n                this._negatedUsedFormats[key] = false;\n              }\n            }\n          }\n        });\n        mux(() => {\n          type.applyDelta(ops);\n        });\n      } // always check selection\n\n\n      if (awareness && quillCursors) {\n        const sel = quill.getSelection();\n        const aw = awareness.getLocalState();\n\n        if (sel === null) {\n          if (awareness.getLocalState() !== null) {\n            awareness.setLocalStateField('cursor', null);\n          }\n        } else {\n          const anchor = Y.createRelativePositionFromTypeIndex(type, sel.index);\n          const head = Y.createRelativePositionFromTypeIndex(type, sel.index + sel.length);\n\n          if (!aw || !aw.cursor || !Y.compareRelativePositions(anchor, aw.cursor.anchor) || !Y.compareRelativePositions(head, aw.cursor.head)) {\n            awareness.setLocalStateField('cursor', {\n              anchor,\n              head\n            });\n          }\n        } // update all remote cursor locations\n\n\n        awareness.getStates().forEach((aw, clientId) => {\n          updateCursor(quillCursors, aw, clientId, doc, type);\n        });\n      }\n    };\n\n    quill.on('editor-change', this._quillObserver);\n    mux(() => {\n      // This indirectly initializes _negatedUsedFormats.\n      // Make sure that this call this after the _quillObserver is set.\n      quill.setContents(type.toDelta());\n    }); // init remote cursors\n\n    if (quillCursors !== null && awareness) {\n      awareness.getStates().forEach((aw, clientId) => {\n        updateCursor(quillCursors, aw, clientId, doc, type);\n      });\n      awareness.on('change', this._awarenessChange);\n    }\n  }\n\n  destroy() {\n    this.type.unobserve(this._typeObserver);\n    this.quill.off(this._quillObserver);\n\n    if (this.awareness) {\n      this.awareness.off('change', this._awarenessChange);\n    }\n  }\n\n}\n\nexports.QuillBinding = QuillBinding;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5xdWlsbC8uL3NyYy9qcy95LXF1aWxsX2JpbmRpbmcuanM/NTA4ZiJdLCJuYW1lcyI6WyJub3JtUXVpbGxEZWx0YSIsImRlbHRhIiwibGVuZ3RoIiwiZCIsImluc2VydCIsImF0dHJpYnV0ZXMiLCJ1bmRlZmluZWQiLCJzbGljZSIsImlucyIsInBvcCIsInVwZGF0ZUN1cnNvciIsInF1aWxsQ3Vyc29ycyIsImF3IiwiY2xpZW50SWQiLCJkb2MiLCJ0eXBlIiwiY3Vyc29yIiwiY2xpZW50SUQiLCJ1c2VyIiwiY29sb3IiLCJuYW1lIiwiY3JlYXRlQ3Vyc29yIiwidG9TdHJpbmciLCJhbmNob3IiLCJZcyIsImNyZWF0ZUFic29sdXRlUG9zaXRpb25Gcm9tUmVsYXRpdmVQb3NpdGlvbiIsIlkiLCJjcmVhdGVSZWxhdGl2ZVBvc2l0aW9uRnJvbUpTT04iLCJoZWFkIiwibW92ZUN1cnNvciIsImluZGV4IiwicmVtb3ZlQ3Vyc29yIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiUXVpbGxCaW5kaW5nIiwiY29uc3RydWN0b3IiLCJxdWlsbCIsImF3YXJlbmVzcyIsIm11eCIsImdldE1vZHVsZSIsIl9uZWdhdGVkVXNlZEZvcm1hdHMiLCJfYXdhcmVuZXNzQ2hhbmdlIiwiYWRkZWQiLCJyZW1vdmVkIiwidXBkYXRlZCIsInN0YXRlcyIsImdldFN0YXRlcyIsImZvckVhY2giLCJpZCIsImdldCIsIl90eXBlT2JzZXJ2ZXIiLCJldmVudCIsImV2ZW50RGVsdGEiLCJlbCIsIm9wdGlvbnMiLCJjb250YWluZXIiLCJyZWFkVmFsdWUiLCJnZXRBdHRyaWJ1dGUiLCJpIiwicHVzaCIsIk9iamVjdCIsImFzc2lnbiIsInVwZGF0ZUNvbnRlbnRzIiwiY3J1ZFNldHRlZCIsIm9ic2VydmUiLCJfcXVpbGxPYnNlcnZlciIsImV2ZW50VHlwZSIsInJlYWx0aW1lIiwic2F2ZVZhbHVlIiwiZGVsZXRlIiwiZ2V0VGV4dCIsIm9wcyIsIm9wIiwia2V5IiwiYXBwbHlEZWx0YSIsInNlbCIsImdldFNlbGVjdGlvbiIsImdldExvY2FsU3RhdGUiLCJzZXRMb2NhbFN0YXRlRmllbGQiLCJjcmVhdGVSZWxhdGl2ZVBvc2l0aW9uRnJvbVR5cGVJbmRleCIsImNvbXBhcmVSZWxhdGl2ZVBvc2l0aW9ucyIsIm9uIiwic2V0Q29udGVudHMiLCJ0b0RlbHRhIiwiZGVzdHJveSIsInVub2JzZXJ2ZSIsIm9mZiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUlBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7QUFQQTtBQUNBO0FBQ0E7QUFHeUI7QUFDNEI7O0FBR3JEO0FBQ0E7QUFDQTtBQUNPLE1BQU1BLGNBQWMsR0FBR0MsS0FBSyxJQUFJO0FBQ3JDLE1BQUlBLEtBQUssQ0FBQ0MsTUFBTixHQUFlLENBQW5CLEVBQXNCO0FBQ3BCLFVBQU1DLENBQUMsR0FBR0YsS0FBSyxDQUFDQSxLQUFLLENBQUNDLE1BQU4sR0FBZSxDQUFoQixDQUFmO0FBQ0EsVUFBTUUsTUFBTSxHQUFHRCxDQUFDLENBQUNDLE1BQWpCOztBQUNBLFFBQUlELENBQUMsQ0FBQ0UsVUFBRixLQUFpQkMsU0FBakIsSUFBOEJGLE1BQU0sS0FBS0UsU0FBekMsSUFBc0RGLE1BQU0sQ0FBQ0csS0FBUCxDQUFhLENBQUMsQ0FBZCxNQUFxQixJQUEvRSxFQUFxRjtBQUNuRk4sV0FBSyxHQUFHQSxLQUFLLENBQUNNLEtBQU4sRUFBUjtBQUNBLFVBQUlDLEdBQUcsR0FBR0osTUFBTSxDQUFDRyxLQUFQLENBQWEsQ0FBYixFQUFnQixDQUFDLENBQWpCLENBQVY7O0FBQ0EsYUFBT0MsR0FBRyxDQUFDRCxLQUFKLENBQVUsQ0FBQyxDQUFYLE1BQWtCLElBQXpCLEVBQStCO0FBQzdCQyxXQUFHLEdBQUdBLEdBQUcsQ0FBQ0QsS0FBSixDQUFVLENBQVYsRUFBYSxDQUFDLENBQWQsQ0FBTjtBQUNEOztBQUNETixXQUFLLENBQUNBLEtBQUssQ0FBQ0MsTUFBTixHQUFlLENBQWhCLENBQUwsR0FBMEI7QUFBRUUsY0FBTSxFQUFF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QUFlQyxFQUFmLEVBQW1CQyxRQUFuQixFQUE2QkMsR0FBN0IsRUFBa0NDLElBQWxDLENBQVo7QUFDRCxPQUZEO0FBR0F1QixlQUFTLENBQUM0QyxFQUFWLENBQWEsUUFBYixFQUF1QixLQUFLeEMsZ0JBQTVCO0FBQ0Q7QUFDRjs7QUFDRDJDLFNBQU8sR0FBSTtBQUNULFNBQUt0RSxJQUFMLENBQVV1RSxTQUFWLENBQW9CLEtBQUtuQyxhQUF6QjtBQUNBLFNBQUtkLEtBQUwsQ0FBV2tELEdBQVgsQ0FBZSxLQUFLckIsY0FBcEI7O0FBQ0EsUUFBSSxLQUFLNUIsU0FBVCxFQUFvQjtBQUNsQixXQUFLQSxTQUFMLENBQWVpRCxHQUFmLENBQW1CLFFBQW5CLEVBQTZCLEtBQUs3QyxnQkFBbEM7QUFDRDtBQUNGOztBQWpJdUIiLCJmaWxlIjoiLi9zcmMvanMveS1xdWlsbF9iaW5kaW5nLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbW9kdWxlIGJpbmRpbmdzL3F1aWxsXG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlTXV0ZXggfSBmcm9tICdsaWIwL211dGV4LmpzJ1xuaW1wb3J0ICogYXMgWSBmcm9tICd5anMnIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbmltcG9ydCB7IEF3YXJlbmVzcyB9IGZyb20gJ3ktcHJvdG9jb2xzL2F3YXJlbmVzcy5qcycgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuaW1wb3J0ICogYXMgWXMgZnJvbSAnLi9SZWxhdGl2ZVBvc2l0aW9uLmpzJ1xuXG4vKipcbiAqIFJlbW92ZXMgdGhlIHBlbmRpbmcgJ1xcbidzIGlmIGl0IGhhcyBubyBhdHRyaWJ1dGVzLlxuICovXG5leHBvcnQgY29uc3Qgbm9ybVF1aWxsRGVsdGEgPSBkZWx0YSA9PiB7XG4gIGlmIChkZWx0YS5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgZCA9IGRlbHRhW2RlbHRhLmxlbmd0aCAtIDFdXG4gICAgY29uc3QgaW5zZXJ0ID0gZC5pbnNlcnRcbiAgICBpZiAoZC5hdHRyaWJ1dGVzID09PSB1bmRlZmluZWQgJiYgaW5zZXJ0ICE9PSB1bmRlZmluZWQgJiYgaW5zZXJ0LnNsaWNlKC0xKSA9PT0gJ1xcbicpIHtcbiAgICAgIGRlbHRhID0gZGVsdGEuc2xpY2UoKVxuICAgICAgbGV0IGlucyA9IGluc2VydC5zbGljZSgwLCAtMSlcbiAgICAgIHdoaWxlIChpbnMuc2xpY2UoLTEpID09PSAnXFxuJykge1xuICAgICAgICBpbnMgPSBpbnMuc2xpY2UoMCwgLTEpXG4gICAgICB9XG4gICAgICBkZWx0YVtkZWx0YS5sZW5ndGggLSAxXSA9IHsgaW5zZXJ0OiBpbnMgfVxuICAgICAgaWYgKGlucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGVsdGEucG9wKClcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWx0YVxuICAgIH1cbiAgfVxuICByZXR1cm4gZGVsdGFcbn1cblxuLyoqXG4gKiBAcGFyYW0ge2FueX0gcXVpbGxDdXJzb3JzXG4gKi9cbmNvbnN0IHVwZGF0ZUN1cnNvciA9IChxdWlsbEN1cnNvcnMsIGF3LCBjbGllbnRJZCwgZG9jLCB0eXBlKSA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKGF3ICYmIGF3LmN1cnNvciAmJiBjbGllbnRJZCAhPT0gZG9jLmNsaWVudElEKSB7XG4gICAgICBjb25zdCB1c2VyID0gYXcudXNlciB8fCB7fVxuICAgICAgY29uc3QgY29sb3IgPSB1c2VyLmNvbG9yIHx8ICcjZmZhNTAwJ1xuICAgICAgY29uc3QgbmFtZSA9IHVzZXIubmFtZSB8fCBgVXNlcjogJHtjbGllbnRJZH1gXG4gICAgICBxdWlsbEN1cnNvcnMuY3JlYXRlQ3Vyc29yKGNsaWVudElkLnRvU3RyaW5nKCksIG5hbWUsIGNvbG9yKVxuICAgICAgY29uc3QgYW5jaG9yID0gWXMuY3JlYXRlQWJzb2x1dGVQb3NpdGlvbkZyb21SZWxhdGl2ZVBvc2l0aW9uKFkuY3JlYXRlUmVsYXRpdmVQb3NpdGlvbkZyb21KU09OKGF3LmN1cnNvci5hbmNob3IpLCBkb2MpXG4gICAgICBjb25zdCBoZWFkID0gWXMuY3JlYXRlQWJzb2x1dGVQb3NpdGlvbkZyb21SZWxhdGl2ZVBvc2l0aW9uKFkuY3JlYXRlUmVsYXRpdmVQb3NpdGlvbkZyb21KU09OKGF3LmN1cnNvci5oZWFkKSwgZG9jKVxuICAgICAgaWYgKGFuY2hvciAmJiBoZWFkICYmIGFuY2hvci50eXBlID09PSB0eXBlKSB7XG4gICAgICAgIHF1aWxsQ3Vyc29ycy5tb3ZlQ3Vyc29yKGNsaWVudElkLnRvU3RyaW5nKCksIHsgaW5kZXg6IGFuY2hvci5pbmRleCwgbGVuZ3RoOiBoZWFkLmluZGV4IC0gYW5jaG9yLmluZGV4IH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHF1aWxsQ3Vyc29ycy5yZW1vdmVDdXJzb3IoY2xpZW50SWQudG9TdHJpbmcoKSlcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBRdWlsbEJpbmRpbmcge1xuICAvKipcbiAgICogQHBhcmFtIHtZLlRleHR9IHR5cGVcbiAgICogQHBhcmFtIHthbnl9IHF1aWxsXG4gICAqIEBwYXJhbSB7QXdhcmVuZXNzfSBbYXdhcmVuZXNzXVxuICAgKi9cbiAgY29uc3RydWN0b3IgKHR5cGUsIHF1aWxsLCBhd2FyZW5lc3MpIHtcbiAgICBjb25zdCBtdXggPSBjcmVhdGVNdXRleCgpXG4gICAgY29uc3QgZG9jID0gLyoqIEB0eXBlIHtZLkRvY30gKi8gKHR5cGUuZG9jKVxuICAgIHRoaXMubXV4ID0gbXV4XG4gICAgdGhpcy50eXBlID0gdHlwZVxuICAgIHRoaXMuZG9jID0gZG9jXG4gICAgdGhpcy5xdWlsbCA9IHF1aWxsXG4gICAgY29uc3QgcXVpbGxDdXJzb3JzID0gcXVpbGwuZ2V0TW9kdWxlKCdjdXJzb3JzJykgfHwgbnVsbFxuICAgIHRoaXMucXVpbGxDdXJzb3JzID0gcXVpbGxDdXJzb3JzXG4gICAgLy8gVGhpcyBvYmplY3QgY29udGFpbnMgYWxsIGF0dHJpYnV0ZXMgdXNlZCBpbiB0aGUgcXVpbGwgaW5zdGFuY2VcbiAgICB0aGlzLl9uZWdhdGVkVXNlZEZvcm1hdHMgPSB7fVxuICAgIHRoaXMuYXdhcmVuZXNzID0gYXdhcmVuZXNzXG4gICAgdGhpcy5fYXdhcmVuZXNzQ2hhbmdlID0gKHsgYWRkZWQsIHJlbW92ZWQsIHVwZGF0ZWQgfSkgPT4ge1xuICAgICAgY29uc3Qgc3RhdGVzID0gLyoqIEB0eXBlIHtBd2FyZW5lc3N9ICovIChhd2FyZW5lc3MpLmdldFN0YXRlcygpXG4gICAgICBhZGRlZC5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgdXBkYXRlQ3Vyc29yKHF1aWxsQ3Vyc29ycywgc3RhdGVzLmdldChpZCksIGlkLCBkb2MsIHR5cGUpXG4gICAgICB9KVxuICAgICAgdXBkYXRlZC5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgdXBkYXRlQ3Vyc29yKHF1aWxsQ3Vyc29ycywgc3RhdGVzLmdldChpZCksIGlkLCBkb2MsIHR5cGUpXG4gICAgICB9KVxuICAgICAgcmVtb3ZlZC5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgcXVpbGxDdXJzb3JzLnJlbW92ZUN1cnNvcihpZC50b1N0cmluZygpKVxuICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy5fdHlwZU9ic2VydmVyID0gZXZlbnQgPT4ge1xuICAgICAgbXV4KCgpID0+IHtcbiAgICAgICAgY29uc3QgZXZlbnREZWx0YSA9IGV2ZW50LmRlbHRhXG4gICAgICAgIC8vIFdlIGFsd2F5cyBleHBsaWNpdGx5IHNldCBhdHRyaWJ1dGVzLCBvdGhlcndpc2UgY29uY3VycmVudCBlZGl0cyBtYXlcbiAgICAgICAgLy8gcmVzdWx0IGluIHF1aWxsIGFzc3VtaW5nIHRoYXQgYSB0ZXh0IGluc2VydGlvbiBzaGFsbCBpbmhlcml0IGV4aXN0aW5nXG4gICAgICAgIC8vIGF0dHJpYnV0ZXMuXG4gICAgICAgIGNvbnN0IGVsID0gcXVpbGwub3B0aW9ucy5jb250YWluZXJcbiAgICAgICAgY29uc3QgcmVhZFZhbHVlID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXJlYWRfdmFsdWUnKSAhPSAnZmFsc2UnO1xuICAgICAgICBpZiAoIXJlYWRWYWx1ZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWx0YSA9IFtdXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXZlbnREZWx0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGQgPSBldmVudERlbHRhW2ldXG4gICAgICAgICAgaWYgKGQuaW5zZXJ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRlbHRhLnB1c2goT2JqZWN0LmFzc2lnbih7fSwgZCwgeyBhdHRyaWJ1dGVzOiBPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9uZWdhdGVkVXNlZEZvcm1hdHMsIGQuYXR0cmlidXRlcyB8fCB7fSkgfSkpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlbHRhLnB1c2goZClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVpbGwudXBkYXRlQ29udGVudHMoZGVsdGEsICd5anMnKVxuICAgICAgICBlbC5jcnVkU2V0dGVkID0gdHJ1ZTtcbiAgICAgIH0pXG4gICAgfVxuICAgIHR5cGUub2JzZXJ2ZSh0aGlzLl90eXBlT2JzZXJ2ZXIpXG4gICAgdGhpcy5fcXVpbGxPYnNlcnZlciA9IChldmVudFR5cGUsIGRlbHRhKSA9PiB7XG4gICAgICBjb25zdCBlbCA9IHF1aWxsLm9wdGlvbnMuY29udGFpbmVyXG4gICAgICBjb25zdCByZWFsdGltZSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1yZWFsdGltZScpICE9ICdmYWxzZSdcbiAgICAgIGNvbnN0IHNhdmVWYWx1ZSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zYXZlX3ZhbHVlJykgIT0gJ2ZhbHNlJztcbiAgICAgIGNvbnN0IHJlYWRWYWx1ZSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1yZWFkX3ZhbHVlJykgIT0gJ2ZhbHNlJztcbiAgICAgIGlmICghcmVhbHRpbWUgfHwgIXNhdmVWYWx1ZSkgcmV0dXJuO1xuICAgICAgXG4gICAgICBpZiAoIXJlYWRWYWx1ZSkge1xuICAgICAgICAvLy4gdG90YWwgdmFsdWVcbiAgICAgICAgdHlwZS5kZWxldGUoMCwgdHlwZS50b1N0cmluZygpLmxlbmd0aCk7XG4gICAgICAgIHR5cGUuaW5zZXJ0KDAsIHF1aWxsLmdldFRleHQoKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGRlbHRhICYmIGRlbHRhLm9wcykge1xuICAgICAgICAvLyB1cGRhdGUgY29udGVudFxuICAgICAgICBjb25zdCBvcHMgPSBkZWx0YS5vcHNcbiAgICAgICAgb3BzLmZvckVhY2gob3AgPT4ge1xuICAgICAgICAgIGlmIChvcC5hdHRyaWJ1dGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBvcC5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLl9uZWdhdGVkVXNlZEZvcm1hdHNba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbmVnYXRlZFVzZWRGb3JtYXRzW2tleV0gPSBmYWxzZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBtdXgoKCkgPT4ge1xuICAgICAgICAgIHR5cGUuYXBwbHlEZWx0YShvcHMpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICAvLyBhbHdheXMgY2hlY2sgc2VsZWN0aW9uXG4gICAgICBpZiAoYXdhcmVuZXNzICYmIHF1aWxsQ3Vyc29ycykge1xuICAgICAgICBjb25zdCBzZWwgPSBxdWlsbC5nZXRTZWxlY3Rpb24oKVxuICAgICAgICBjb25zdCBhdyA9IGF3YXJlbmVzcy5nZXRMb2NhbFN0YXRlKClcbiAgICAgICAgaWYgKHNlbCA9PT0gbnVsbCkge1xuICAgICAgICAgIGlmIChhd2FyZW5lc3MuZ2V0TG9jYWxTdGF0ZSgpICE9PSBudWxsKSB7XG4gICAgICAgICAgICBhd2FyZW5lc3Muc2V0TG9jYWxTdGF0ZUZpZWxkKCdjdXJzb3InLCBudWxsKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBhbmNob3IgPSBZLmNyZWF0ZVJlbGF0aXZlUG9zaXRpb25Gcm9tVHlwZUluZGV4KHR5cGUsIHNlbC5pbmRleClcbiAgICAgICAgICBjb25zdCBoZWFkID0gWS5jcmVhdGVSZWxhdGl2ZVBvc2l0aW9uRnJvbVR5cGVJbmRleCh0eXBlLCBzZWwuaW5kZXggKyBzZWwubGVuZ3RoKVxuICAgICAgICAgIGlmICghYXcgfHwgIWF3LmN1cnNvciB8fCAhWS5jb21wYXJlUmVsYXRpdmVQb3NpdGlvbnMoYW5jaG9yLCBhdy5jdXJzb3IuYW5jaG9yKSB8fCAhWS5jb21wYXJlUmVsYXRpdmVQb3NpdGlvbnMoaGVhZCwgYXcuY3Vyc29yLmhlYWQpKSB7XG4gICAgICAgICAgICBhd2FyZW5lc3Muc2V0TG9jYWxTdGF0ZUZpZWxkKCdjdXJzb3InLCB7XG4gICAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgICAgaGVhZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIGFsbCByZW1vdGUgY3Vyc29yIGxvY2F0aW9uc1xuICAgICAgICBhd2FyZW5lc3MuZ2V0U3RhdGVzKCkuZm9yRWFjaCgoYXcsIGNsaWVudElkKSA9PiB7XG4gICAgICAgICAgdXBkYXRlQ3Vyc29yKHF1aWxsQ3Vyc29ycywgYXcsIGNsaWVudElkLCBkb2MsIHR5cGUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIHF1aWxsLm9uKCdlZGl0b3ItY2hhbmdlJywgdGhpcy5fcXVpbGxPYnNlcnZlcilcbiAgICBtdXgoKCkgPT4ge1xuICAgICAgLy8gVGhpcyBpbmRpcmVjdGx5IGluaXRpYWxpemVzIF9uZWdhdGVkVXNlZEZvcm1hdHMuXG4gICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGlzIGNhbGwgdGhpcyBhZnRlciB0aGUgX3F1aWxsT2JzZXJ2ZXIgaXMgc2V0LlxuICAgICAgcXVpbGwuc2V0Q29udGVudHModHlwZS50b0RlbHRhKCkpXG4gICAgfSlcbiAgICAvLyBpbml0IHJlbW90ZSBjdXJzb3JzXG4gICAgaWYgKHF1aWxsQ3Vyc29ycyAhPT0gbnVsbCAmJiBhd2FyZW5lc3MpIHtcbiAgICAgIGF3YXJlbmVzcy5nZXRTdGF0ZXMoKS5mb3JFYWNoKChhdywgY2xpZW50SWQpID0+IHtcbiAgICAgICAgdXBkYXRlQ3Vyc29yKHF1aWxsQ3Vyc29ycywgYXcsIGNsaWVudElkLCBkb2MsIHR5cGUpXG4gICAgICB9KVxuICAgICAgYXdhcmVuZXNzLm9uKCdjaGFuZ2UnLCB0aGlzLl9hd2FyZW5lc3NDaGFuZ2UpXG4gICAgfVxuICB9XG4gIGRlc3Ryb3kgKCkge1xuICAgIHRoaXMudHlwZS51bm9ic2VydmUodGhpcy5fdHlwZU9ic2VydmVyKVxuICAgIHRoaXMucXVpbGwub2ZmKHRoaXMuX3F1aWxsT2JzZXJ2ZXIpXG4gICAgaWYgKHRoaXMuYXdhcmVuZXNzKSB7XG4gICAgICB0aGlzLmF3YXJlbmVzcy5vZmYoJ2NoYW5nZScsIHRoaXMuX2F3YXJlbmVzc0NoYW5nZSlcbiAgICB9XG4gIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/y-quill_binding.js\n")},0:function(module,exports){eval("/* (ignored) *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5xdWlsbC91dGlsIChpZ25vcmVkKT9kMjMwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiAoaWdub3JlZCkgKi8iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")},1:function(module,exports){eval("/* (ignored) *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5xdWlsbC91dGlsIChpZ25vcmVkKT9lZDFkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiAoaWdub3JlZCkgKi8iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n")},2:function(module,exports){eval("/* (ignored) *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5xdWlsbC91dGlsIChpZ25vcmVkKT8zZmRlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiAoaWdub3JlZCkgKi8iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n")},3:function(module,exports){eval("/* (ignored) *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5xdWlsbC91dGlsIChpZ25vcmVkKT81YmJiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiAoaWdub3JlZCkgKi8iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n")},4:function(module,exports){eval("/* (ignored) *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5xdWlsbC9idWZmZXIgKGlnbm9yZWQpP2Q3NjUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiNC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIChpZ25vcmVkKSAqLyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4\n")},5:function(module,exports){eval("/* (ignored) *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5xdWlsbC9jcnlwdG8gKGlnbm9yZWQpPzY2MTEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiNS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIChpZ25vcmVkKSAqLyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///5\n")},6:function(module,exports){eval("/* (ignored) *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5xdWlsbC91dGlsIChpZ25vcmVkKT8wNTUzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiAoaWdub3JlZCkgKi8iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6\n")},7:function(module,exports){eval("/* (ignored) *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5xdWlsbC91dGlsIChpZ25vcmVkKT8wYjllIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiAoaWdub3JlZCkgKi8iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7\n")},8:function(module,exports){eval("/* (ignored) *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5xdWlsbC9idWZmZXIgKGlnbm9yZWQpPzhkNjEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiOC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIChpZ25vcmVkKSAqLyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///8\n")},9:function(module,exports){eval("/* (ignored) *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5xdWlsbC9idWZmZXIgKGlnbm9yZWQpP2RhMmQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiOS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIChpZ25vcmVkKSAqLyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9\n")}}).default}));